<!DOCTYPE html>
<meta charset=utf-8><script>
// MIT License ¬© 2025-2026 Syluminose
window.r_wasm_b64 = 'INSERT_WASM_B64_HERE';
let M=1,a=.063,am=a/10,jr=.02,Et=61,d=document,c=z=>d.createElement(z),e=d.documentElement,s=[],E=[],SB=null,Ct='#fffd',MG=1,$c=0,f5=Float32Array,C$=t=>{if(t!==$c)throw'A'},{max:ma,min:mi,sin:sn,cos:cs,random:rn,abs:ab,PI:pi,sqrt:sq}=Math,tp=pi*2,SR=44100,FC=[18700,19200,19700,19200],k$=(v,l,h)=>ma(l,mi(h,v)),go=f=>{s.length&&(f(),At())},sE=f=>{f();At()},gR=t=>t.getBoundingClientRect(),W=(t,a)=>t.textContent=a,C=(t,k)=>t.style.cssText=k,mk=(l,x,t)=>{let o=c(l);x&&W(o,x);t&&C(o,t);return o},ap=(p,...a)=>p.append(...a),ev=(l,n,f)=>l['on'+n]=f,mp=(n,f)=>{if(n?.length)for(let i=0;i<n.length;i++)f(n[i],i);else for(let i=0;i<n;i++)f(i)},tG='G√©n√©ration',EM=['‚è≥','üîî','üö©','üåÄ','üåä','üíé','üìå','üèÆ','‚ú®','üìç','üí†','‚ö°','üîÜ','üí´'],BT=['üî∂','üîÅ','‚òÄÔ∏è','üé≤','üéóÔ∏è','‚ùå','+','üåì'],VN='vmin;',B='width:100%;',CU='cursor:pointer;',BR='border-radius:1'+VN,PD='padding:1'+VN,P5='padding:0.5'+VN,G1='gap:1'+VN,D='display:grid;',GT='grid-template-columns:',GF='grid-auto-flow:column;',PI='place-items:center;',CEN='justify-content:center;align-items:center;',F_CEN=D+PI,FW='font-weight:bold;',FS='font-size:',S1=FS+'2'+VN,S2=FS+'4'+VN,S3=FS+'3'+VN,S0=S3+FW,ICO=CU+S2,C1='white-space:pre;color:',I_BASE=ICO+C1,IB=I_BASE+'#000;',IR=I_BASE+'#f44;',IY=I_BASE+'#fb4;',IG=I_BASE+'#0b0;',IM=F_CEN+'min-width:7'+VN+'height:7'+VN,AC='align-items:center;',S4=D+AC+GF+G1,PA='position:absolute;',R_P='position:relative;',H5='height:5'+VN,F_C='text-align:center;',B_S=R_P+CU+P5+BR+C1+'#000;'+D+PI+F_C+'background:'+Ct+';',S5=B_S+'height:8'+VN+'min-width:12'+VN,S5G=B_S+'height:10'+VN+'min-width:12'+VN,S6='position:fixed;left:5'+VN+'width:90'+VN+'z-index:9;background:'+Ct+';'+BR+PD+'display:none;max-height:70vh;overflow-y:auto;box-shadow:0 1vh 3vh #0005;border:1px solid #000;',S9='position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90'+VN+'background:#000;color:#fff;'+PD+BR+S1+'z-index:8;white-space:pre-line;border:2px solid #fb4',PN=new f5(1e5).map(rn),PB=(t,j)=>{let i=~~(t/jr),f=t/jr-i,v=k=>PN[(i+k)%1e5],a0=v(-1),a1=v(0),a2=v(1),a3=v(2);return(a1+.5*f*(a2-a0+f*(2*a0-5*a1+4*a2-a3+f*(3*(a1-a2)+a3-a0)))-.5)*j},qC=(f,t=rH)=>{t&&cancelIdleCallback(t);return requestIdleCallback(f)},hM=x=>k$(x*33,0,330),G=i=>{let M=0,b=s[i];mp(3,k=>M=ma(M,df(b,k*30)));return`hsl(${hM(M)},100%,50%)`},hG=(f,i,l)=>{let M=0,s0=s[i],s1=s[i+1];mp(3,c=>{let o=c*30,v0=df(s0,o),v1=df(s1,o);M=ma(M,v0+(v1-v0)*f)});return`hsl(${hM(M)},100%,${l}%)`},H=(i,l)=>i>=s.length-1?G(i).replace('50%',`${l}%`):`linear-gradient(to bottom,${Array.from({length:9},(_,j)=>hG(j/8,i,l)).join(',')})`,
P=[[[0,300],[10,10],[0,0],[0,0],[0,0],1,'Dur√©e\n(s)',0],[[0,120],[12,18],[-10,10],[0,0],[0,0],.1,'Freq\n(Hz)',1],[[-.5,.5],[0,0],[-.5,.5],[0,0],[0,0],.01,'PO\n(Cy)',1],[[0,50],[3,3],[-1,1],[0,0],[0,0],.01,'Dev PM\n(Cy)',1],[[0,100],[3,10],[-10,10],[0,0],[0,0],.1,'Dev ùõº-PM\n(Cy/s·µÖ)',1],[[1,5],[1,1],[-.1,.1],[0,0],[0,0],.01,'FO ùõº-PM\n(-)',1],[[-.5,.5],[0,0],[-.5,.5],[-.33,.33],[0,0],.01,'PO ùõº-PM\n(Cy)',1],[[0,100],[0,0],[-10,10],[0,0],[0,0],.1,'Amb AM\n(%)',1],[[0,200],[50,100],[-10,10],[0,0],[0,0],.1,'F‚Çò AM\n(Hz)',1],[[-.5,.5],[0,0],[-.5,.5],[0,0],[0,0],.01,'PO AM\n(Cy)',1],[[-1,1],[-.5,.5],[-.1,.1],[0,0],[0,0],.01,'Skew\n(-)',1],[[.5,3],[1,2],[-1,1],[0,0],[0,0],.01,'Shape\n(-)',1],[[0,100],[10,10],[-10,10],[0,0],[0,0],.1,'Amb\n(%)',1],[[7,20],[7,7],[0,0],[0,0],[0,0],.1,'Jitter\n(%)',1]],
gX=r=>{let l=r.length;return{ty:r[l-1],lb:r[l-2],st:r[l-3],gl:r[0],rp:r[1],gb:r[2],rcd:r[3],rb:r[4]}},gr=(rg,st)=>(st>=1)?~~(rn()*(rg[1]-rg[0]+1)+rg[0]):+(rn()*(rg[1]-rg[0])+rg[0]).toFixed(st.toString().split('.')[1]?.length||0),rV=()=>{let a_=new f5(90);mp(14,j=>{let {ty,st,rp,rcd,rb}=gX(P[j]),C=gr(rp,st),v=gr(rcd,st),bk=gr(rb,st);if(ty){mp(6,k=>{let ch=k>>1,p_=C+(ch-1)*v;a_[k*15+j]=(k&1)?p_+bk/2:p_-bk/2})}else mp(6,k=>a_[k*15+j]=C)});return a_},rS=()=>rV(),cp=a=>new f5(a),FX=(sg,j)=>{let a=k=>mp(6,m=>sg[m*15+k]=sg[(2+(m&1))*15+k]);j?a(j):mp(14,k=>k>0&&a(k))},sw=(a,j)=>{let f=k=>{if(gX(P[k]).ty)mp(3,c=>{let o=c*30+k,v=a[o];a[o]=a[o+15];a[o+15]=v})};j?f(j):mp(14,k=>f(k));return a},u$=(sg,j,k,v)=>{let si=k&1,pI=(k&~1)*15+j,pA=(k|1)*15+j,B=si?v:sg[pA]-sg[pI],P=si?(sg[pI]+sg[pA])/2:v;sg[pI]=P-B/2;sg[pA]=P+B/2},dL=(i,p,l1,sr)=>{let b=s[i],r=P[p],{ty,st}=gX(r),pc=st.toString().split('.')[1]?.length||0;if(l1){if(ty==1){let h=[];mp(3,x=>{let v0=b[x*30+p],v1=b[x*30+15+p];h.push(v0===v1?v0.toFixed(pc):v0.toFixed(pc)+' '+v1.toFixed(pc))});let f=h.every(v=>v===h[0]);W(l1,f?h[0]:h.join('\n'));C(l1,C1+'#000;display:block;text-align:center;line-height:1.2;');sr&&C(sr,'display:none')}else{let l=b[p],rv=b[15+p];W(l1,l.toFixed(pc));sr&&(W(sr,(ty||l!=rv)?rv.toFixed(pc):''),C(sr,'display:'+((ty||l!=rv)?'block':'none')))}}},U=[],mo,sl=[],ga=[],cv,zm,if$,zo=0,zs=1,dt=[],gl,g2,pg,p2,rH=null,ZW=null,t0g=0,P$A=null,t$A=null,Tt=0,rL=[],M_=(a,b,t)=>(a+b)/2*t,P$=ss=>{let A=[],hC=new f5(6),hP=new f5(6),hA=new f5(6);mp(ss,(sg,i)=>{let nv=ss[i+1];A.push({C:[...hC],P:[...hP],A:[...hA]});if(nv){let dT=sg[0];mp(6,k=>{let ch=k*15;hC[k]+=M_(Fn(sg[ch+4],sg[ch+3],sg[ch+5]),Fn(nv[ch+4],nv[ch+3],nv[ch+5]),dT);hP[k]+=M_(sg[ch+1],nv[ch+1],dT);hA[k]+=M_(sg[ch+8],nv[ch+8],dT)})}});return A},T$=ss=>{let T=0,A=[];mp(ss.length-1,i=>{let dT=ss[i][0];A.push({t:T,dT,sg:ss[i],sn$:ss[i+1],hO:P$A[i]});T+=dT});Tt=T;t$A=A},tI=(T,z)=>`t=${(zo*T).toFixed(2)}s-${((zo+zs)*T).toFixed(2)}s${z?' Zoom√ó'+(1/zs).toFixed(1):''}`,wI=()=>new Promise(r=>requestIdleCallback(r)),qR=f=>{rH=qC(()=>{f();rH=null})};
let Li,In,Sl;
const an=(v,k,h)=>(sn(v+k*sn(v))/2+.5)**h,Fn=(a,b,h)=>(a/ma(.001,b))**(1/h)/tp,df=(sg,o)=>sg[o+4]**(1/sg[o+5])*sg[o+3]**(1-1/sg[o+5]);
WebAssembly.instantiate(Uint8Array.from(atob(window.r_wasm_b64),c=>c.charCodeAt(0)),{env:{sn:Math.sin,pw:Math.pow}}).then(m=>{let e=m.instance.exports;Li=e.Li;In=e.In;Sl=e.Sl;At()});
let cV=(p,n,t,D,hC,hP,hA,rj,fi,ch)=>{let L=o=>Li(p[ch+o],n[ch+o],t,D),I=o=>In(p[ch+o],n[ch+o],t,D),H=L(5),A=L(3),On=hC+In(Fn(p[ch+4],p[ch+3],p[ch+5]),Fn(n[ch+4],n[ch+3],n[ch+5]),t,D)+L(6),phi=hP+I(1)+L(2)+rj+A/2*sn(tp*On);if(fi==1){let An=(1-L(7)/100)*(sn(tp*(hA+I(8)+L(9)))/2+.5)+L(7)/100,sn_=an(tp*phi,L(10),L(11)),am=L(12)/100;return An*((1-am)*sn_+am)}return fi==2?L(1)+Sl(p[ch+2],n[ch+2],D)+df(p,ch)/2*cs(tp*On):L(4)/2*sn(tp*On+H*pi/2)},gD=async(n,T,cT,oP)=>{let dr=[],dA=[[],[],[]],dT_s=T/n;for(let c=0;c<3;c++)for(let y=0;y<3;y++){C$(cT);let fi=y+1,fC=!y?FC[c]:FC[3],pC=fi==1?tp*fC/SR:0,st=[new f5(n),new f5(n)],sm=fi==1?[new f5(n),new f5(n)]:null,cP=[0,0],kS=c*2,i_s=0,pk=[[],[]];for(let i=0;i<n;i++){let tg=i*dT_s;while(i_s<t$A.length-1&&tg>=t$A[i_s+1].t)i_s++;let {t:ts,dT,sg,sn$,hO}=t$A[i_s],t=tg-ts,rj=PB(tg,Li(sg[13],sn$[13],t,dT)/100);for(let k=0;k<2;k++){let ch=kS+k,o=ch*15,v=cV(sg,sn$,t,dT,hO.C[ch],hO.P[ch],hO.A[ch],rj,fi,o);st[k][i]=v;if(fi==1){sm[k][i]=v*sn(cP[k]);if(i>2&&v>.15){let p=st[k][i-1],pp=st[k][i-2];if(p>pp&&p>v){let d1=p-pp,d2=p-v;pk[k].push((i-1)+.5*(d1-d2)/(d1+d2))}}cP[k]+=pC;if(cP[k]>=tp)cP[k]-=tp}}}let isS=(fi==1),R=0;if(isS){let dSum=0,cR=0;mp(2,k=>{let d=pk[k];if(d.length>10){let pV=[];for(let i=1;i<d.length;i++)pV.push(d[i]-d[i-1]);for(let i=1;i<pV.length;i++){let m=(pV[i]+pV[i-1])/2;dSum+=ab(pV[i]-pV[i-1])/m;cR++}}});if(cR)R=dSum/cR}mp(2,k=>{dA[y].push({p:st[k],isS,f:isS?sm[k]:null,R})});oP&&oP((c*3+y+1)/9,`Analyse ${~~(((c*3+y+1)/9)*100)}%`);await wI()}mp(3,y=>dr.push(dA[y][0],dA[y][2],dA[y][4],dA[y][1],dA[y][3],dA[y][5]));return dr},iG=ca=>{let g=ca.getContext('webgl2',{alpha:!1,antialias:!0,preserveDrawingBuffer:!0});if(!g)return null;let s=(t,S)=>{let h=g.createShader(t);g.shaderSource(h,S);g.compileShader(h);return h},pg=g.createProgram();g.attachShader(pg,s(g.VERTEX_SHADER,'#version 300 es\nin vec2 p;void main(){gl_Position=vec4(p,0,1);}'));g.attachShader(pg,s(g.FRAGMENT_SHADER,'#version 300 es\nprecision mediump float;out vec4 fragColor;uniform vec3 c;void main(){fragColor=vec4(c,1);}'));g.linkProgram(pg);return{g,pg}},dr=(ca,os,z,T,iZ)=>{let r=gR(ca),dp=devicePixelRatio,w=r.width*dp,h=r.height*dp;ca.width=w;ca.height=h;let g=iZ?g2:gl,pg$=iZ?p2:pg;if(!g){let in$=iG(ca);g=in$.g;pg$=in$.pg;iZ?(g2=g,p2=pg$):(gl=g,pg=pg$)}g.viewport(0,0,w,h);g.clearColor(os?0:.067,os?0:.067,os?0:.067,1);g.clear(g.COLOR_BUFFER_BIT);g.useProgram(pg$);let lw=iZ?8:1,pL$=g.getAttribLocation(pg$,'p'),cL=g.getUniformLocation(pg$,'c'),hS=h/18,mS=w<<1,sc2=2/h;mp(18,gi=>{let d=dt[gi];if(!d)return;g.lineWidth(gi>=6&&gi<=17&&!iZ?4:lw);let st=~~(os*d.p.length),ed=mi(d.p.length,~~((os+z)*d.p.length)),zp=os?d.p.subarray(st,ed):d.p,dL=zp.length,pd=zp;if(dL>mS){let sp=~~(dL/mS),nL=~~(dL/sp);pd=new f5(nL);for(let i=0;i<nL;i++)pd[i]=zp[i*sp]}let rL$=pd.length<<1;if(!SB||SB.length<rL$)SB=new f5(rL$);let vt=SB.subarray(0,rL$),pL_v=pd.length-1||1,scY=d.isS?hS:hS/2,ofY=1-gi*hS/h*2;for(let i=0;i<pd.length;i++){vt[i<<1]=i/pL_v*2-1;vt[(i<<1)+1]=d.isS?(ofY-hS*sc2)+pd[i]*scY*sc2:ofY-pd[i]*scY*sc2}let bf=d.buffer;if(!bf||d.vL!==rL$){bf&&g.deleteBuffer(bf);bf=g.createBuffer();d.buffer=bf}g.bindBuffer(g.ARRAY_BUFFER,bf);g.bufferData(g.ARRAY_BUFFER,vt,g.DYNAMIC_DRAW);d.vL=rL$;g.enableVertexAttribArray(pL$);g.vertexAttribPointer(pL$,2,g.FLOAT,!1,0,0);g.uniform3fv(cL,[[1,.27,.27],[.27,1,.27],[.27,.27,1]][gi%3]);g.drawArrays(g.LINE_STRIP,0,pd.length);if(d.isS&&!iZ){let cR=d.R>=.025?'#4f4':d.R>=.01?'#f90':'#f44',lB=rL[gi];if(!lB)rL[gi]=lB=mk('div','',PA+`left:1${VN}top:${gi*5.55}%;${S1}font-weight:bold;padding:0 .5${VN}background:#0007;`),ap(cv.parentNode,lB);W(lB,`R:${(d.R*100).toFixed(2)}%`);C(lB,lB.style.cssText+`color:${cR};display:block;`)}})},J=async()=>{let Tt_=Tt;$c++;const t_=$c;if(!mo){let s_=PA+`top:0;right:0.5${VN}color:#fb4;${S1}pointer-events:none;z-index:1;background:#0007;padding:0 .5${VN}`,z_=`position:fixed;top:0;left:0;width:100vw;height:calc(100dvh - 20vh);background:#000;color:#fff;${BR+S1}z-index:7;${D}grid-template-rows:1fr;place-items:center;border-bottom:2px solid #fb4`;mo=mk('div','',R_P+'width:100%;height:20vh;background:#000;color:#fff;border-top:1px solid #fff;');cv=mk('canvas','','border:1px solid #fb4;'+B+'height:100%;display:block;');zm=mk('canvas','',B+'height:100%;display:block;min-height:0;background:#000');if$=mk('div',tI(Tt_),`top:0.2${VN}${s_}`);let ct=mk('div','',B+'height:100%;position:relative;min-height:0');ap(ct,if$,cv);ap(mo,ct);ev(cv,'click',()=>{if(ZW)return;let T=Tt_,zM=mk('div','',z_),zW=mk('div','',B+'height:100%;position:relative;min-height:0;');ZW=zM;let cl=mk('div','‚ùå',PA+`top:0.5${VN}right:0.5${VN}${IR}z-index:8`);ev(cl,'click',()=>(ZW.remove(),ZW=null));let zI=mk('div',tI(T,1),`top:2${VN}right:5${VN}${s_.replace('z-index:1','z-index:8')}`);ap(zW,zm,zI,cl);ap(zM,zW);ap(U[0],zM);dr(zm,zo,zs,T,!0);let uM=e=>{let rt=gR((e.touches?.[0]??e).target),x=((e.touches?.[0]??e).clientX-rt.left)/rt.width;zo=k$(x-zs/2,0,1-zs);dr(zm,zo,zs,Tt_,!0);W(zI,tI(Tt_,1))},hW=e=>{e.preventDefault();let nz=k$(zs*(1+e.deltaY*-.001),.01,1);zo=k$(zo+(zs-nz)/2,0,1-nz);zs=nz;dr(zm,zo,zs,Tt_,!0);W(zI,tI(Tt_,1))};ev(zm,'mousemove',uM);ev(zm,'touchmove',uM);ev(zm,'wheel',hW)})};zs=1/Tt_;zo=0;t0g=performance.now();try{dt=await gD(~~(Tt_*300),Tt_,t_,(p,m)=>W(if$,`‚è≥ ${m}`));queueMicrotask(()=>{dr(cv,0,1,Tt_);dr(zm,zo,zs,Tt_,!0);W(if$,tI(Tt_)+` (${(performance.now()-t0g).toFixed(2)}ms)`)})}catch(e){if(e==='A')W(if$,'‚ùå Annul√©')}},cS$=(r,j,k,v,m,uFx,mc)=>{let sp=gX(r),{gl,gb,st,ty} = sp,{lb} = gT(r,j),ib=m==1&&k%2,mn=(ib?gb:gl)[0],mx=(ib?gb:gl)[1],prec=(st.toString().split('.')[1]?.length||0),lb_f=()=>ty?mc?`${m?['P','B'][k&1]:['G','D'][k&1]} ${v.toFixed(prec)}`:j==0?`${EM[j]} ${v.toFixed(prec)}`:j<13?`${m?['P','B'][k&1]:['G','D'][k&1]} ${v.toFixed(prec)}`:` ${EM[j]} ${v.toFixed(prec)}`:`${EM[j]} ${v.toFixed(prec)}`,lT=mk('div',lb_f(),S0+'text-align:center;min-width:10'+VN),cl=ty?mc?'#fb4':j==0?'#fb4':j<13?['#f00','#0b0','#00f'][k>>1]:'#f0f':'#fb4',sl=c('input');sl.type='range';sl.min=mn;sl.max=mx;sl.step=st;sl.value=v;C(sl,`margin:0 1${VN}height:1${VN}appearance:none;background:${cl};${BR}--c:${cl}`);let uV=(nv,fin)=>{v=k$(+nv.toFixed(prec),mn,mx);sl.value=v;W(lT,lb_f());uFx(v,fin)};ev(sl,'input',()=>uV(+sl.value,0));ev(sl,'change',()=>uV(+sl.value,1));let aC=mk('div','',D+AC+GT+'auto auto 1fr auto;width:100%;'),bL=mk('div','',D+GF+'min-width:8'+VN),bR=mk('div','',D+GF+'min-width:8'+VN);mp(4,u=>{let stp=[[-10,-1],[1,10]][u/2|0][u%2],t=['‚´∑','‚™°','‚™¢','‚´∏'][u],b=mk('div',t,S0+CU+'width:4'+VN+'text-align:center;');ev(b,'click',e=>{e.stopPropagation();uV(v+stp*st,1)});u<2?ap(bL,b):ap(bR,b)});ap(aC,bL,lT,sl,bR);return{container:aC,uV}},z=()=>W(U[5],`Configuration-${s.length-1} s√©quences-${Tt.toFixed(2)}s`),uL=(i,p,l1,fin)=>{if(l1){dL(i,p,l1,l1.nextElementSibling)}uc();if(fin){P$A=P$(s);T$(s);z();qR(()=>mo&&J())}},hS=e=>{mp(ga,sd=>sd&&(sd.style.display='none'));mp(sl,row=>mp(row,sd=>sd&&(sd.style.display='none')));mp(E,it=>{it[1].style.display='none';it[2].style.display='none'})},mBA=(isG,i,j,r,sd,rF)=>{if(j<1)return;let tB=mk('div','',D+GT+'auto 1fr auto;'+AC+'padding-bottom:1'+VN),bL=mk('div','',D+GF+G1),bM=mk('div',BT[7],ICO),tx=mk('div',MG?'P/B':'G/D',S1+IB+FW),ic=mk('div',EM[j],S2);ev(bM,'click',e=>{e.stopPropagation();MG=1-MG;rF()});ap(bL,bM,tx,ic);let bR=mk('div','',D+GF+G1);mp(5,bI=>{let b=mk('div',BT[bI],ICO);ev(b,'click',e=>{e.stopPropagation();go(()=>{let a=k=>{let {ty,st,rp,rcd,rb}=gX(r);if(bI==0)mp(6,m=>s[k][m*15+j]=s[0][m*15+j]);if(bI==1){if(isG){if(k%2)sw(s[k],j)}else sw(s[k],j)}if(bI==2)mp(2,m=>{let o=m?60:0;s[k][o+j]=s[k][30+j];s[k][o+15+j]=s[k][45+j]});if(bI==3){let a_=rV();mp(6,m=>s[k][m*15+j]=a_[m*15+j])}if(bI==4)mp(3,p_=>u$(s[k],j,p_*2+1,0))};if(isG)mp(s,(v,k)=>a(k));else a(i)}) ;rF()});ap(bR,b)});ap(tB,bL,mk('div'),bR);sd.prepend(tB)},iE=(r,j,iv,iv2,sd,uFg,uFp,isG,i,rF)=>{let d_=`flex:1;${G1}`,dG=mk('div','',D+GF+'gap:2'+VN),cts=[mk('div','',D+d_),mk('div','',D+d_)],sL_=[],sP_=[];mp(iv,(v,k)=>{let{container:ct,uV}=cS$(r,j,k,v,0,uFg(k));sL_.push(uV);ap(cts[0],ct)});mp(iv2,(v,k)=>{let{container:ct,uV}=cS$(r,j,k,v,1,uFp(k));sP_.push(uV);ap(cts[1],ct)});let mG=idx=>{let v_=(iv[idx]+iv[idx+2]+iv[idx+4])/3;cts[0].prepend(cS$(r,j,idx,v_,0,(v,f)=>mp(3,o=>sL_[idx+o*2](v,f)),1).container)},mP=idx=>{let v_=(iv2[idx]+iv2[idx+2]+iv2[idx+4])/3;cts[1].prepend(cS$(r,j,idx,v_,1,(v,f)=>mp(3,o=>sP_[idx+o*2](v,f)),1).container)};mp(2,x=>{mG(1-x);mP(1-x)});ap(dG,MG?cts[1]:cts[0]);ap(sd,dG);mBA(isG,i,j,r,sd,rF)},iC=(r,j,vs,vs2,sd,i)=>{let rF=()=>{W(sd,'');if(!j||j==13){let uF=(v,fin)=>{mp(s,k=>mp(6,m=>k[m*15+j]=v));if(fin){At();qR(()=>mo&&J())}};ap(sd,cS$(r,j,0,vs[0],0,uF).container)}else{let uFg=k=>(v,fin)=>{let {ty}=gX(r);mp(s,row=>{if(ty===1)row[k*15+j]=v;else mp(6,m=>row[m*15+j]=v)});if(fin){At();qR(()=>mo&&J())}},uFp=k=>(v,fin)=>{mp(s,row=>u$(row,j,k,v));if(fin){At();qR(()=>mo&&J())}};iE(r,j,vs,vs2,sd,uFg,uFp,1,i,rF)}};rF();return()=>sd.style.display='none'},iS=(r,j,b,i,l1,sr,sd)=>{let rF=()=>{W(sd,'');if(!j||j==13){let v=b[j],uFx=(v,fin)=>{mp(6,k=>s[i][k*15+j]=v);uL(i,j,l1,fin)};ap(sd,cS$(r,j,0,v,0,uFx).container)}else{let {ty}=gX(r),iv=ty===1?[s[i][j],s[i][15+j],s[i][30+j],s[i][45+j],s[i][60+j],s[i][75+j]]:[s[i][j],s[i][15+j],s[i][30+j],s[i][45+j],s[i][60+j],s[i][75+j]],iv2=[];mp(3,k=>iv2.push((s[i][(k*2)*15+j]+s[i][(k*2+1)*15+j])/2,s[i][(k*2+1)*15+j]-s[i][(k*2)*15+j]));let uFg=k=>(v,fin)=>{if(ty===1)s[i][k*15+j]=v;else mp(6,m=>s[i][m*15+j]=v);uL(i,j,l1,fin)},uFp=k=>(v,fin)=>{u$(s[i],j,k,v);uL(i,j,l1,fin)};iE(r,j,iv,iv2,sd,uFg,uFp,0,i,rF)}};rF();return()=>sd.style.display='none'},gT=(r,j)=>{let {lb}=gX(r);return{hL:lb,em:EM[j]}},gP=(p,r,j,i,b,isG)=>{let w=mk('div','',isG?S5G:S5),l1=c('div'),sr=c('div'),sd=mk('div','',S6);ap(U[6],sd);isG?ga[j]=sd:sl[i][j]=sd;if(isG){let {hL,em}=gT(r,j),l3=mk('div',em,S2),v1=mk('div','',S1+C1+'#000;');W(v1,hL);ap(w,l3,v1)}else C(l1,S1+C1+'#000'),C(sr,S1+C1+'#000'),dL(i,j,l1,sr),ap(w,l1,sr);ev(w,'click',e=>{e.stopPropagation();hS();let vs=j?[s[0][j],s[0][15+j],s[0][30+j],s[0][45+j],s[0][60+j],s[0][75+j]]:[s[0][j]],vs2=[];mp(3,k=>vs2.push((s[0][(k*2)*15+j]+s[0][(k*2+1)*15+j])/2,s[0][(k*2+1)*15+j]-s[0][(k*2)*15+j]));(isG?iC(r,j,vs,vs2,sd):iS(r,j,b,i,l1,sr,sd));sd.style.display='block';let r_=gR(w),h_=sd.offsetHeight,t_=r_.bottom+5;if(t_+h_>innerHeight)t_=ma(5,r_.top-h_-5);sd.style.top=t_+'px'});ap(p,w);return w},K=()=>{let k_=`position:sticky;top:0;left:0;right:0;z-index:6;background:linear-gradient(45deg,#ff0,#f0f,#0ff,#0f0);${PD+S1}`,h=mk('div','',D+GT+'1fr auto;'+AC),ht=mk('div','üåàSpiraStrober',C1+'#000;'+S2+'cursor:default;'),hb=mk('div','',D+GF+G1);mp(5,i=>{let b=mk('div',BT[i],IB);ev(b,'click',()=>go(()=>{if(i==0)mp(s.length-1,k=>s[k+1]=cp(s[0]));if(i==1)mp(s,(v,k)=>k&1&&(s[k]=sw(v)));if(i==2)mp(s,row=>mp(14,j=>j&&mp(2,m=>{let o=m?60:0;row[o+j]=row[30+j];row[o+15+j]=row[45+j]})));if(i==3)mp(s,(v,k)=>s[k]=rV());if(i==4)mp(s,row=>mp(14,j=>j&&mp(3,o=>u$(row,j,o*2+1,0))))}));ap(hb,b)});ap(h,ht,hb);let p=mk('div','',D+AC+GT+'repeat(14,auto) 20vmin;'+G1);mp(14,j=>gP(p,P[j],j,null,null,!0));let wM=mk('div','',S5G+D+GF+'gap:0.5'+VN),bD=mk('div','üîª',ICO),bu=mk('div','üî∫',ICO),br=mk('div','‚ôªÔ∏è',ICO);ev(bD,'click',()=>go(()=>s.push(rS())));ev(bu,'click',()=>go(()=>s.unshift(rS())));ev(br,'click',()=>go(()=>{s=[rS()];At()}));ap(wM,bD,bu,br);ap(p,wM);let g=mk('div','',k_);ap(g,h,p);return g},L=i=>{let a_=c('div'),sL=s.length,sW=PA+'top:0;right:0;width:22'+VN+'background:'+Ct+';'+BR+'z-index:2;'+D+GT+'repeat(3,1fr);place-items:center;padding:1'+VN+'gap:1'+VN+'display:none;';C(a_,`border:0;border-radius:0;background:${H(i,50)};${P5}position:relative;${S1}`+D+AC+GT+'repeat(14,auto) 20vmin;'+G1);sl[i]=[];mp(14,j=>gP(a_,P[j],j,i,s[i],!1));let ms=[mk('div','',sW),mk('div','',sW)],ac=[{style:IG,target:ms[0],actions:[()=>sE(()=>s.splice(i+1,0,cp(s[i]))),()=>sE(()=>s.splice(i+1,0,sw(cp(s[i])))),()=>sE(()=>sE(()=>{let a_=rV();FX(a_);s.splice(i+1,0,a_)})),()=>sE(()=>s.splice(i+1,0,rV())),()=>sE(()=>sE(()=>{let a_=rV();mp(14,j=>j&&mp(3,o=>u$(a_,j,o*2+1,0)));s.splice(i+1,0,a_)}))]},{style:IY,target:ms[1],actions:[()=>i&&sE(()=>s[i]=cp(s[i-1])),()=>sE(()=>s[i]=sw(cp(s[i]))),()=>sE(()=>FX(s[i])),()=>sE(()=>s[i]=rV()),()=>sE(()=>mp(14,j=>j&&mp(3,o=>u$(s[i],j,o*2+1,0))))]}];mp(2,idx=>{let {style:st,target:tg,actions:f}=ac[idx];mp(5,k=>{let b=mk('div',BT[k],st+IM);ev(b,'click',e=>{e.stopPropagation();f[k]()});ap(tg,b)})});let wA=mk('div','',S5+D+GF+'gap:0.5'+VN),bD=mk('div',BT[5],IR),bM=mk('div','üìù',IR),bA$=mk('div','‚ú¥Ô∏è',IY);C(bD,`opacity:${sL<=1?.3:1};${bD.style.cssText}`);ev(bD,'click',()=>sL>1&&sE(()=>s.splice(i,1)));ev(bM,'click',e=>{e.stopPropagation();hS();ms[1].style.display='grid'});ev(bA$,'click',e=>{e.stopPropagation();hS();ms[0].style.display='grid'});ap(wA,bM,bA$,bD);ap(a_,wA,ms[0],ms[1]);return[a_,ms[0],ms[1]]},uc=()=>mp(E,(it,i)=>{if(it&&it[0])it[0].style.background=H(i,50)}),At=()=>{let f=d.createDocumentFragment(),cL=s.length;while(E.length>cL){let r=E.pop();r&&r[0].remove()}mp(s,(row,i)=>{if(!E[i]){let b=L(i);E[i]=b;ap(f,b[0])}else{let pd=E[i][0];E[i][0].style.background=H(i,50);mp(14,j=>dL(i,j,pd.childNodes[j].firstChild,pd.childNodes[j].childNodes[1]))}});f.childNodes.length&&ap(U[4],f);P$A=P$(s);T$(s);z();J()},uP=(p,mg)=>{eBg.style.width=(p*100)+'%';W(eBt,mg?`‚è≥ ${~~(p*100)}% - ${mg}`:tG)},eA=async P$0=>{let t=Tt;$c++;let T=$c;if(t<=0||s.length<=1)throw'dur√©e nulle';let f=~~(t*SR),c=sC,u=c<3?a:a/3,O=44,W$=44+f*4,A=new ArrayBuffer(W$),V=new DataView(A),pC=[0,0,0,0,0,0,0],fC$=c===3?[FC[0],FC[1],FC[2]]:[FC[3],FC[3],FC[3]],pI=fC$.map(f=>tp*f/SR),rj=0,h=0,H=0;mp('RIFFWAVEfmt ',(v,i)=>V.setUint8(i<4?i:i+4,v.charCodeAt(0)));V.setUint32(4,W$-8,1);V.setUint32(16,16,1);V.setUint16(20,1,1);V.setUint16(22,2,1);V.setUint32(24,SR,1);V.setUint32(28,SR*4,1);V.setUint16(32,4,1);V.setUint16(34,16,1);mp('data',(v,i)=>V.setUint8(36+i,v.charCodeAt(0)));V.setUint32(40,f*4,1);for(let k=0;k<((f+32767)>>15);k++){let s_=k*32768,l=mi((k+1)*32768,f)-s_,i_s=0;for(let j=0;j<l;j++){let ix=s_+j,tg=ix/SR;while(i_s<t$A.length-1&&tg>=t$A[i_s+1].t)i_s++;let {t:ts,dT,sg,sn$,hO}=t$A[i_s],t=tg-ts,rj=PB(tg,Li(sg[13],sn$[13],t,dT)/100);let vL=0,vR=0;for(let i=0;i<3;i++)if(c>=3||c===i){let chL=i*2,chR=chL+1,v=cV(sg,sn$,t,dT,hO.C[chL],hO.P[chL],hO.A[chL],rj,1,chL*15)*sn(pC[chL]);vL+=v;pC[chL]+=pI[i];if(pC[chL]>=tp)pC[chL]-=tp;let v2=cV(sg,sn$,t,dT,hO.C[chR],hO.P[chR],hO.A[chR],rj,1,chR*15)*sn(pC[chR]);vR+=v2;pC[chR]+=pI[i];if(pC[chR]>=tp)pC[chR]-=tp}if(c===3){let Q=sn(h),Z=sn(H),Qh=Q*am;V.setInt16(O,k$((vL*a+Qh*(1-Z))*32767,-32768,32767)|0,1);O+=2;V.setInt16(O,k$((vR*a+Qh*(1+Z))*32767,-32768,32767)|0,1);O+=2;h+=tp*18200/SR;if(h>=tp)h-=tp;H+=tp*jr*1000/SR;if(H>=tp)H-=tp}else V.setInt16(O,k$(vL*u*32767,-32768,32767)|0,1),O+=2,V.setInt16(O,k$(vR*u*32767,-32768,32767)|0,1),O+=2}if(!(k&7))C$(T),P$0((k+1)/((f+32767)>>15),`G√©n√©ration: ${~~((k+1)/((f+32767)>>15)*100)}%`),await wI()}aP.src=URL.createObjectURL(new Blob([A],{type:'audio/wav'}))},dA=async(aF,P$0)=>{$c++;let T=$c,aC=new AudioContext({sampleRate:SR}),aB=await aC.decodeAudioData(aF),L=aB.getChannelData(0),R=aB.getChannelData(1),nS=aB.length,dR=aB.duration,nP=~~(dR*300),dS=nS/nP,N=441*M;dt=[];mp(18,()=>dt.push({p:new f5(nP),isS:!1,R:0}));let bF=[18700,19200,19700],cO=bF.map(f=>2*cs(tp*f/SR)),cLs=['üî¥','üü¢','üîµ'];for(let c=0;c<3;c++){let w=cO[c],pL=[],pR=[];for(let i=0;i<nP;i++){let oW=~~(i*dS),eW=mi(nS,oW+N),qL1=0,qL2=0,qR1=0,qR2=0;for(let j=oW;j<eW;j++){let qL0=L[j]+w*qL1-qL2;qL2=qL1,qL1=qL0;let qR0=R[j]+w*qR1-qR2;qR2=qR1,qR1=qR0}let vL=sq(qL1*qL1+qL2*qL2-qL1*qL2*w)/(N*a/2),vR=sq(qR1*qR1+qR2*qR2-qR1*qR2*w)/(N*a/2);dt[c].p[i]=vL;dt[c+3].p[i]=vR;if(i>2){let v=dt[c].p,pv=v[i-1],pp=v[i-2],n=vL;if(pv>pp&&pv>n&&vL>.15)pL.push((i-1)+.5*(pv-pp-pv+n)/(pv-pp+pv-n));v=dt[c+3].p;pv=v[i-1];pp=v[i-2];n=vR;if(pv>pp&&pv>n&&vR>.15)pR.push((i-1)+.5*(pv-pp-pv+n)/(pv-pp+pv-n))}}let gR_=(p)=>{let dS=0,cR=0;for(let i=1;i<p.length;i++){let d=p[i]-p[i-1];if(i>1){let m=(d+p[i-1]-p[i-2])/2;dS+=ab(d-(p[i-1]-p[i-2]))/m;cR++}}return cR?dS/cR:0};dt[c].isS=dt[c+3].isS=1;dt[c].R=gR_(pL);dt[c+3].R=gR_(pR);P$0((c+1)/3,`${cLs[c]} Analyse freq`);C$(T);await wI()}Tt=dR;P$0(1,'‚úÖ OK');queueMicrotask(()=>{dr(cv,0,1,Tt);dr(zm,zo,zs,Tt_,!0)})},sC=3,aP,fC,eB,eBg,eBt;mp(7,i=>U[i]=c('div'));C(U[0],'padding:0;margin:0;overflow-x:hidden;overflow-y:auto;height:100dvh;display:block;');let tC=mk('div','','overflow-x:auto;width:100%;'),tW=mk('div','','min-width:fit-content;display:grid;');ap(tW,K(),U[4]);ap(tC,tW);ap(U[0],tC,U[5],U[6]);ap(e,U[0]);mp(Et,()=>s.push(rS()));ev(window,'load',()=>{d.head.innerHTML='<style>input[type=range]::-webkit-slider-thumb{appearance:none;width:3vmin;height:3vmin;background:var(--c);border-radius:50%;cursor:pointer;border:none}</style>';fC=mk('div','','position:sticky;bottom:0;left:0;right:0;z-index:1;width:100%;');let eU=mk('div','',R_P+'width:100%;padding:0.2'+VN+'0.5'+VN+';background:#111;'+D+G1+'border-top:1px solid #f83;'),eR=mk('div','',D+AC+GT+'auto auto auto 1fr auto auto;'+G1);ap(fC,mo);let opts=['üî¥','üü¢','üîµ','üåà','‚òÄÔ∏è'],nm=['Rouge','Vert','Bleu','Spectra','Unifi√©'],sP=(tx,ps)=>{let tp$=mk('div',tx,S9),cl=mk('div','‚ùå',PA+'top:1'+VN+'right:1'+VN+IR);ev(cl,'click',()=>tp$.remove());ps&&ap(tp$,...ps);ap(tp$,cl);ap(U[0],tp$);setTimeout(()=>d.addEventListener('click',()=>tp$.parentNode&&tp$.remove(),{once:!0}),500)},tF=[mk('div',"‚àÜx=x‚Å∫-x\nIx=x‚ãÖt+‚àÜx.t¬≤/(2‚è≥)\nTx=x+‚àÜx.t/‚è≥\nDx=‚àÜx/‚è≥\nMx=‚è≥.(x‚Å∫+x)/2\nWx=sin(2œÄ.x)\nUx=x/2+¬Ω\nJ=perlin()\nL[y](x)=(1-Ty).x+Ty\nP(x,y,z)=W[x+Ty/2œÄ.Wx]^Tz\nA(x,y)=Ix+Ty+Œ£[Mx‚Åª]",C1+'#f40;'+S0),mk('div',"f=(üåä/üåÄ)^(1/üíé)/2œÄ\nd=Tüåä^(1/Tüíé)‚ãÖTüåÄ^(1-1/Tüíé)\no=A(f,üìå)\nœÜ=A(üîî,üö©)+Tüí´.J+TüåÄ/2‚ãÖWo",C1+'#0f4;'+S0),mk('div',"S=L[üèÆ]‚óãU‚óãW‚óãA(‚ú®,üìç).L[üîÜ]‚óãU‚óãP(œÜ,üí†,‚ö°)\nF=Tüîî+Düö©+d/2‚ãÖW[o+¬º]\nQ=Tüåä/2‚ãÖW[o+Tüíé/4]",C1+'#f09;'+S0)];eB=mk('button','',B_BT+'background:#4af;width:100%;'),eBg=mk('div','',PA+'left:0;top:0;height:100%;width:0%;background:linear-gradient(90deg,#0f0,#4f4);transition:width 0.3s;'),eBt=mk('span',tG,R_P+'z-index:1;color:black;');ap(eB,eBg,eBt);let bF=mk('div','‚õ∂',IR+IM.replace('7','5')), bL=mk('div','üí°',IB+IM.replace('7','5')),bW=mk('div','',R_P+IM.replace('7','5')),bV=mk('div',opts[sC],IB),nS=mk('select','',PA+'top:0;left:0;opacity:0;'+B+H5+CU);mp(opts,(v,i)=>{let o=mk('option',v+' '+nm[i]);o.value=i;i===sC&&(o.selected=1);ap(nS,o)});ev(nS,'change',e=>{sC=+e.target.value;W(bV,opts[sC])});ap(bW,bV,nS);ev(bF,'click',()=>d.fullscreenElement?d.exitFullscreen():e.requestFullscreen());ev(bL,'click',e=>{e.stopPropagation();sP('',tF)});aP=mk('audio','',B+'height:4'+VN);aP.controls=1;ev(eB,'click',async()=>{eB.disabled=1;try{await eA(uP);setTimeout(()=>{W(eBt,tG);eBg.style.width='0%';eB.disabled=0},2e3)}catch(er){W(er);eB.disabled=0}});let fI=mk('input','',H5+'display:none;');fI.type='file';fI.accept='audio/*';ev(fI,'change',async e=>{let f=e.target.files[0];if(!f)return;eB.disabled=1;try{let aB=await f.arrayBuffer();await dA(aB,uP);setTimeout(()=>{W(eBt,tG);eBg.style.width='0%';eB.disabled=0},2e3)}catch(er){W(eBt,'‚èπÔ∏è '+er);eB.disabled=0}finally{fI.value=''}});let bSt=mk('div','‚èπÔ∏è',ICO+IM+'width:6vw;');ev(bSt,'click',()=>{ $c++;W(eBt,'‚èπÔ∏è Annul√©');eBg.style.width='0%';eB.disabled=0;setTimeout(()=>W(eBt,tG),2e3)});let bSe=mk('div','üîç',ICO+IM+'width:6vw;');ev(bSe,'click',()=>fI.click());ap(eR,bF,bL,bW,eB,bSt,bSe);ap(eU,eR,aP,fI);ap(fC,mo,eU);ap(U[0],fC);ev(U[0],'click',hS)})
</script></html>
