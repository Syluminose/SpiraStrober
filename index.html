<!DOCTYPE html>
<meta charset=utf-8><script>
// MIT License Â© 2025 Syluminose
let a=.063,am=a/10,Et=2,
d=document,c=z=>d.createElement(z),e=d.documentElement,s=[],E=[],pb=[],GB=[],SB=null,Ct='#fffd',RM_T=null,RM_I=-1,$cancelToken=0,C$=cT=>{if(cT!==$cancelToken)throw'A'},{max:ma,min:mi,sin:sn,cos:cs,random:rn,abs:ab,PI:pi}=Math,tp=pi*2,p22=pi*pi*2,SR=44100,FC=[18700,19200,19700,19200],
go=f=>{s.length&&(f(),At())},sE=f=>{f();At()},gR=t=>t.getBoundingClientRect(),W=(t,a)=>t.textContent=a,C=(t,k)=>t.style.cssText=k,mk=(l,x,t)=>{let o=c(l);x&&W(o,x);t&&C(o,t);return o},ap=(p,...a)=>p.append(...a),ev=(l,n,f)=>l['on'+n]=f,
mp=(n,f)=>{let i=0;for(;i<n;i++)f(i)},
EM=['â³','ðŸ””','ðŸš©','ðŸŒ€','ðŸ’«','ðŸ“Œ','ðŸ®','â­','ðŸ“'],BT=['ðŸ”¶','ðŸ”','â˜€ï¸','ðŸŽ²','ðŸª‡','ðŸª©','âŒ','+'],
B='width:100%;',CU='cursor:pointer;',BR='border-radius:1vmin;',PD='padding:1vmin;',P5='padding:0.5vmin;',G1='gap:1vmin;',D='display:flex;',CEN='justify-content:center;align-items:center;',F_CEN=D+CEN,FW='font-weight:bold;',FS='font-size:',S1=FS+'2vmin;',S2=FS+'4vmin;',S3=FS+'3vmin;',S0=S3+FW,ICO=CU+S2,C1='white-space:pre;color:',I_BASE=ICO+C1,IB=I_BASE+'#000;',IR=I_BASE+'#f44;',IY=I_BASE+'#fb4;',IG=I_BASE+'#4f4;',IM=F_CEN+'min-width:8.5vmin;height:8vmin;',S4=D+'align-items:center;'+G1,R_P='position:relative;',H5='height:5vmin;',F_C='flex-direction:column;'+CEN+'text-align:center;',B_S=R_P+CU+P5+BR+C1+'#000;'+D+F_C+'background:'+Ct+';flex-shrink:0;',S5=B_S+'height:8vmin;min-width:12vmin;',S5G=B_S+'height:12vmin;min-width:12vmin;',S6='position:fixed;left:5vmin;'+B.replace('100%','90vmin')+'z-index:9;background:'+Ct+';'+BR+PD+'display:none;max-height:80vh;overflow-y:auto;',S9='position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);'+B.replace('100%','90vmin')+'background:#000;color:#fff;'+PD+BR+S1+'z-index:9;white-space:pre-line;border:2px solid #fb4',B_BT=BR+S3+CU+H5+R_P+'overflow:hidden;border:none;padding:1vmin 2vmin;color:#000;',
PL=[-.33,0,.33],PR=[-.33,0,.33],MD=0,
qC=(f,t=rH)=>{t&&cancelIdleCallback(t);return requestIdleCallback(f)},hM=(x,y)=>ma(0,mi(330,ab(x-y)*66)),
G=i=>{let M=0,b=s[i];mp(3,k=>{let o=k*18;M=ma(M,ab(b[o+3]*b[o+4]*tp))});return`hsl(${hM(M,0)},100%,50%)`},
hG=(f,k,i,l)=>{let M=0,s0=s[i],s1=s[i+1];mp(3,c=>{let o=c*18,p0=s0[o+3]*s0[o+4]*tp,p1=s1[o+3]*s1[o+4]*tp;M=ma(M,ab(p0+(p1-p0)*f))});return`hsl(${hM(M,0)},100%,${l}%)`},
H=(i,l)=>i>=s.length-1?G(i).replace('50%',`${l}%`):`linear-gradient(to bottom,${Array.from({length:9},(_,j)=>hG(j/8,0,i,l)).join(',')})`,
P={p:[[[0,300],[10,10],[0,0],[0,0],[0,0],1,'DurÃ©e (s)',0],
[[0,40],[13.5,27],[-10,10],[0,0],[0,0],.05,'Freq(Hz)',1],
[[-.5,.5],[0,0],[-1,1],[0,0],[0,0],.01,'Phase (Cy)',1],
[[0,2],[.1,1],[-.5,.5],[0,0],[0,0],.01,'Amp PM (Cy)',1],
[[0,1],[.1,1],[-10,10],[0,0],[0,0],.01,'Freq PM (Hz)',1],
[[-.5,.5],[0,0],[-1,1],[0,0],[0,0],.01,'Phase PM(Cy)',1],
[[0,1],[.5,.5],[-1,1],[0,0],[0,0],.01,'Min AM (0-1)',1],
[[0,40],[.05,.5],[-10,10],[0,0],[0,0],.01,'Freq AM (Hz)',1],
[[-.5,.5],[0,0],[-1,1],[0,0],[0,0],.01,'Phase AM (Cy)',1]]},
gX=r=>{let l=r.length;return{ty:r[l-1],lb:r[l-2],st:r[l-3],gl:r[0],rp:r[1],gb:r[2],rcd:r[3],rb:r[4]}},gr=(rg,st)=>(st>=1)?~~(rn()*(rg[1]-rg[0]+1)+rg[0]):+(rn()*(rg[1]-rg[0])+rg[0]).toFixed(st.toString().split('.')[1]?.length||0),
rV=()=>{let a_=new Float32Array(54),p=P.p;mp(9,j=>{let {ty,st,rp,rcd,rb}=gX(p[j]),C=gr(rp,st),R=[C+rcd[0],C+rcd[1]];if(ty){let P_=[],B_k=[];mp(3,()=>{P_.push(gr(R,st));B_k.push(gr(rb,st))});mp(6,k=>{let c=k>>1;a_[k*9+j]=(k&1)?P_[c]+B_k[c]/2:P_[c]-B_k[c]/2})}else mp(6,k=>a_[k*9+j]=C)});return a_},
rS=()=>{let a_=rV();mp(3,i=>{let o=i*2;a_[o*9+5]=PL[i];a_[(o+1)*9+5]=PR[i]});return a_},
cp=a=>new Float32Array(a),cA=a=>[a[0],a[1]],
FX=sg=>{let f=sg[19],d=sg[28];sg[1]=sg[37]=f;sg[10]=sg[46]=d},
UN=sg=>mp(3,i=>{let o=i*18+1;sg[o+9]=sg[o]}),
PO=sg=>mp(3,i=>{let o=i*2;sg[o*9+5]=PL[i];sg[(o+1)*9+5]=PR[i]}),
sw=a=>{mp(9,k=>{if(gX(P.p[k]).ty)mp(3,c=>{let o=c*18+k,v=a[o];a[o]=a[o+9];a[o+9]=v})});return a},
uP=(sg,j,k,v)=>{let si=k&1,pI=k*9+j,pA=(k^1)*9+j,B=si?v:sg[pA]-sg[pI],P=si?(sg[pI]+sg[pA])/2:v;sg[pI]=P-B/2;sg[pA]=P+B/2},
fX=v=>v.toFixed(v==~~v?0:v*10==~~(v*10)?1:2),
dL=(i,p,l1,sr)=>{let b=s[i],r=P.p[p],{ty}=gX(r),f=v=>fX(v);if(!MD){let l=b[p],rv=b[9+p];if(ty==1){let h='';mp(3,x=>{h+=f(b[x*18+p])+' '+f(b[x*18+9+p])+'<br>'});l1.innerHTML=h;C(l1,'display:block;text-align:center;line-height:1.2;white-space:nowrap;');sr&&C(sr,'display:none')}else{l1&&W(l1,f(l));sr&&(W(sr,(ty||l!=rv)?f(rv):''),C(sr,'display:'+((ty||l!=rv)?'block':'none')))}}else{if(l1){let h='';mp(3,k=>{h+=f((b[(k*2)*9+p]+b[(k*2+1)*9+p])/2)+' '+f(b[(k*2+1)*9+p]-b[(k*2)*9+p])+'<br>'});l1.innerHTML=h}C(l1,'display:block;text-align:center;line-height:1.2;white-space:nowrap;');sr&&C(sr,'display:none')}},
U,mo,sl=[],ga=[],cv,zm,if$,zo=0,zs=1,dt=[],gl,g2,pg,p2,rH=null,ZW=null,t0g=0,t0a=0,P$A=null,t$A=null,Tt=0,
P$=ss=>{let A=[],ln=ss.length-1,hC=[0,0],hM=[0,0],hA=[0,0],i=0;for(;i<ln;i++){let sg=ss[i],sn$=ss[i+1],dT=sg[0],hO={C:cA(hC),M:cA(hM),A:cA(hA)};A.push(hO);for(let k=0;k<2;k++){let ch=k*9;hC[k]+=In(sg[ch+4],sn$[ch+4],dT,dT);hM[k]+=In(sg[ch+1],sn$[ch+1],dT,dT);hA[k]+=In(sg[ch+7],sn$[ch+7],dT,dT)}}A.push({C:cA(hC),M:cA(hM),A:cA(hA)});return A},
T$=ss=>{let T=0,A=[],ln=ss.length-1;for(let i=0;i<ln;i++){let dT=ss[i][0],sg=ss[i],sn$=ss[i+1],hO=P$A[i];A.push({t:T,dT,sg,sn$,hO});T+=dT}Tt=T;t$A=A},
tI=(T,z)=>`t=${(zo*T).toFixed(2)}s-${((zo+zs)*T).toFixed(2)}s${z?' ZoomÃ—'+(1/zs).toFixed(1):''}`,wI=()=>new Promise(r=>window.requestIdleCallback?requestIdleCallback(r):setTimeout(r,0)),qR=f=>{rH=qC(()=>{f();rH=null})},
Li=(a_,b,t,T)=>a_+(b-a_)*t/T,In=(a_,b,t,T)=>a_*t+(b-a_)*t*t/(2*T),Sl=(a_,b,T)=>(b-a_)/T,cO=(o0,o1,p0,p1,t,T,hO)=>tp*(hO+In(o0,o1,t,T)+Li(p0,p1,t,T)),
cV=(p,nv,t,T,hO,hM,hA,fi,ch)=>{let lA=Li(p[ch+3],nv[ch+3],t,T);if(fi==1){let Ag=cO(p[ch+4],nv[ch+4],p[ch+5],nv[ch+5],t,T,hO),Os=sn(Ag),lH=Li(p[ch+2],nv[ch+2],t,T),iF=In(p[ch+1],nv[ch+1],t,T),lM=Li(p[ch+6],nv[ch+6],t,T),AmAg=cO(p[ch+7],nv[ch+7],p[ch+8],nv[ch+8],t,T,hA);return(sn(tp*(hM+iF+lH+lA*.5*Os))+1)*.5*(lM+(1-lM)*(sn(AmAg)+1)*.5)}let lO=Li(p[ch+4],nv[ch+4],t,T),Ag=cO(p[ch+4],nv[ch+4],p[ch+5],nv[ch+5],t,T,hO);return fi==2?Li(p[ch+1],nv[ch+1],t,T)+Sl(p[ch+2],nv[ch+2],T)+lA*lO*pi*cs(Ag):Sl(p[ch+1],nv[ch+1],T)-lA*lO*lO*p22*sn(Ag)},
gD=(n,T,kS,fi,fC)=>{let ds=[new Uint16Array(n),new Uint16Array(n)],st=[new Float32Array(n),new Float32Array(n)],sm=fi==1?[new Float32Array(n),new Float32Array(n)]:null,mn=[1e9,1e9],mx=[-1e9,-1e9],pC=fi==1?tp*fC/SR:0,cP=[0,0],i_map=new Uint8Array(n),i_seg=0,i_last=t$A.length;if(i_last>1){mp(n,i=>{let t_global=i*T/n;while(i_seg<i_last-1&&t_global>=t$A[i_seg+1].t)i_seg++;i_map[i]=i_seg})}else i_map.fill(0);mp(n,i=>{let ix=i_map[i],t_global=i*T/n,{t:t_start,dT,sg,sn$,hO}=t$A[ix],t=t_global-t_start;for(let k=0;k<2;k++){let ch=kS+k,cO=ch*9,hC=hO.C[k],hM=hO.M[k],hA=hO.A[k],v=cV(sg,sn$,t,dT,hC,hM,hA,fi,cO);if(fi==1){let s_v=v*sn(cP[k]);st[k][i]=v;sm[k][i]=s_v;cP[k]+=pC;if(cP[k]>=tp)cP[k]-=tp}else{st[k][i]=v;if(v<mn[k])mn[k]=v;if(v>mx[k])mx[k]=v}}});let g0=mi(mn[0],mn[1]),g1=ma(mx[0],mx[1]),ri=65535/(g1-g0||1);if(fi==1){g0=0;g1=1;ri=65535}for(let k=0;k<2;k++){let pU=new Uint16Array(n),sv=st[k];for(let i=0;i<n;i++)pU[i]=ma(0,mi(65535,~~((sv[i]-g0)*ri)));ds[k]=fi==1?{p:pU,gm:[g0,g1],f:sm[k]}:{p:pU,gm:[g0,g1]}}return[ds[0],ds[1]]},
DC=async(n,T,cT,oP)=>{let dr=[],dA=[[],[],[]],t=0;for(let c=0;c<3;c++){for(let y=0;y<3;y++){C$(cT);let ds=gD(n,T,c*2,y+1,!y?FC[c]:FC[3]);dA[y].push(...ds);t++;oP&&oP(t/9);await wI()}}for(let y=0;y<3;y++)dr.push(dA[y][0],dA[y][2],dA[y][4],dA[y][1],dA[y][3],dA[y][5]);return dr},
iG=ca=>{let g=ca.getContext('webgl2',{alpha:!1,antialias:!0,preserveDrawingBuffer:!0});if(!g)return null;let vs=g.createShader(g.VERTEX_SHADER),fs=g.createShader(g.FRAGMENT_SHADER);g.shaderSource(vs,'#version 300 es\nin vec2 p;void main(){gl_Position=vec4(p,0,1);}');g.shaderSource(fs,'#version 300 es\nprecision mediump float;uniform vec3 c;out vec4 fragColor;void main(){fragColor=vec4(c,1);}');g.compileShader(vs);g.compileShader(fs);if(!g.getShaderParameter(vs,g.COMPILE_STATUS)||!g.getShaderParameter(fs,g.COMPILE_STATUS))return null;let pg=g.createProgram();g.attachShader(pg,vs);g.attachShader(pg,fs);g.linkProgram(pg);return g.getProgramParameter(pg,g.LINK_STATUS)?{g,pg}:null},
dr=(ca,os,z,T,iZ)=>{let r=gR(ca),dp=devicePixelRatio,w=r.width*dp,h=r.height*dp;ca.width=w;ca.height=h;let g=iZ?g2:gl,pg$=iZ?p2:pg;if(!g){let in$=iG(ca);if(!in$)return;g=in$.g;pg$=in$.pg;iZ?(g2=g,p2=pg$):(gl=g,pg=pg$)}g.viewport(0,0,w,h);g.clearColor(os?0:.067,os?0:.067,os?0:.067,1);g.clear(g.COLOR_BUFFER_BIT);if(!dt.length)return;g.useProgram(pg$);let lw=iZ?8:1,pL=g.getAttribLocation(pg$,'p'),cL=g.getUniformLocation(pg$,'c'),hS=h/18;for(let gi=0;gi<dt.length;gi++){let d=dt[gi];g.lineWidth(gi>=6&&gi<=17&&!iZ?4:lw);let st=~~(os*d.p.length),ed=mi(d.p.length,~~((os+z)*d.p.length)),zp=os?d.p.subarray(st,ed):d.p,yB=gi*hS,dL=zp.length,pd=zp,mS=w<<1;if(dL>mS){let sp=~~(dL/mS),nL=~~(dL/sp);pd=new Uint16Array(nL);for(let i=0;i<nL;i++)pd[i]=zp[i*sp]}let rL=pd.length<<1;if(!SB||SB.length<rL)SB=new Float32Array(rL);let vt=SB.subarray(0,rL),pL$=pd.length-1||1,g0=d.gm[0],g1=d.gm[1],scY=hS/(g1-g0||1)*65535/65535,ofY=1-yB/h*2,sc2=2/h;for(let i=0;i<pd.length;i++){vt[i<<1]=i/pL$*2-1;vt[(i<<1)+1]=ofY-(g1-(g0+pd[i]/65535*(g1-g0)))*scY*sc2}let bf=d.buffer,vL=vt.length;if(!bf||d.vL!==vL){bf&&g.deleteBuffer(bf);bf=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,bf);g.bufferData(g.ARRAY_BUFFER,vt,g.DYNAMIC_DRAW);d.buffer=bf;d.vL=vL}else{g.bindBuffer(g.ARRAY_BUFFER,bf);g.bufferSubData(g.ARRAY_BUFFER,0,vt)}g.enableVertexAttribArray(pL);g.vertexAttribPointer(pL,2,g.FLOAT,!1,0,0);g.uniform3fv(cL,[[1,.27,.27],[.27,1,.27],[.27,.27,1]][gi%3]);g.drawArrays(g.LINE_STRIP,0,pd.length)}},
J=async()=>{let Tt_=Tt;$cancelToken++;const cT=$cancelToken;if(!mo){let s_=`position:absolute;top:0;right:0.5vmin;color:#fb4;${S1}pointer-events:none;z-index:101`,z_=`position:fixed;top:26vh;left:0vmin;width:100vw;height:25vh;background:#000;color:#fff;${BR+S1}z-index:1001;${D}flex-direction:column;align-items:center;border:2px solid #fb4`;mo=mk('div','','position:relative;width:100%;height:25vh;background:#000;color:#fff;border-top:2px solid #fff;');cv=mk('canvas','','border:1px solid #fb4;'+B+'height:100%;display:block;');zm=mk('canvas','',B+'height:100%;display:block;min-height:0;background:#000');if$=mk('div',tI(Tt_),`top:0.2vmin;${s_}`);let ct=mk('div','',B+'height:100%;position:relative;min-height:0');ap(ct,if$,cv);ap(mo,ct);ev(cv,'click',()=>{if(ZW)return;let T=Tt_,zM=mk('div','',z_),zW=mk('div','',B+'height:100%;position:relative;min-height:0;');ZW=zM;let cl=mk('div','âŒ',`position:absolute;top:0.5vmin;right:0.5vmin;${IR}z-index:102`);ev(cl,'click',()=>{(ZW.remove(),ZW=null)});let zI=mk('div',tI(T,1),`top:2vmin;right:5vmin;${s_.replace('101','102')}`);ap(zW,zm,zI,cl);ap(zM,zW);ap(d.body,zM);dr(zm,zo,zs,T,!0);let uM=e=>{let rt=gR((e.touches?.[0]??e).target),x=((e.touches?.[0]??e).clientX-rt.left)/rt.width,T=Tt_;zo=ma(0,mi(1-zs,x-zs/2));dr(zm,zo,zs,T,!0);W(zI,tI(T,1))},hW=e=>{e.preventDefault();let nz=ma(.01,mi(1,zs*(1+e.deltaY*-.001))),T=Tt_;zo=ma(0,mi(1-nz,zo+(zs-nz)/2));zs=nz;dr(zm,zo,zs,T,!0);W(zI,tI(T,1))};ev(zm,'mousemove',uM);ev(zm,'touchmove',uM);ev(zm,'wheel',hW)})};zs=1/Tt_;zo=0;t0g=performance.now();try{dt=await DC(~~(Tt_*441),Tt_,cT,p=>W(if$,`â³ ${~~((p*.3+.1)*100)}% - Calcul courbes`));queueMicrotask(()=>{dr(cv,0,1,Tt_);dr(zm,zo,zs,Tt_,!0);W(if$,tI(Tt_)+` (${(performance.now()-t0g).toFixed(2)}ms)`)});}catch(e){if(e==='A'){W(if$,'âŒ AnnulÃ©');return}throw e}},
rg=(n,x,t,v)=>Object.assign(c('input'),{type:'range',value:v,min:n,max:x,step:t,style:'width:100%;margin:0',onclick:e=>e.stopPropagation()}),gS_=(r,ib)=>{let {gl,gb,st}=gX(r);return{mn:(ib?gb:gl)[0],mx:(ib?gb:gl)[1],st}},gL=(r,j,k,v,m)=>{let tx=j==0?`${EM[j]} ${fX(v)}`:`${['ðŸ”´','ðŸŸ¢','ðŸ”µ'][k>>1]}${m?['P','B'][k&1]:['G','D'][k&1]} ${fX(v)}`;return{tx}},
cS$=(r,j,k,v,m,uFx)=>{let sp=gS_(r,m==1&&k%2),step=sp.st,prec=(step.toString().split('.')[1]?.length||0),lb=gL(r,j,k,v,m),lT=mk('div',lb.tx,S0+'text-align:center;flex-grow:1;'),sl=rg(sp.mn,sp.mx,step,v),aC=mk('div','',D+'justify-content:space-between;align-items:center;'),uSV=nv=>{nv=ma(sp.mn,mi(sp.mx,nv));nv=parseFloat(nv.toFixed(prec));sl.value=nv;W(lT,gL(r,j,k,nv,m).tx);uFx(nv)};ev(sl,'input',()=>uSV(+sl.value));for(let [t,v] of [['â«·',-10],['âª¡',-1]]){let b=mk('div',t,S0+CU+'width:5vmin;text-align:center;');ev(b,'click',e=>{e.stopPropagation();uSV(+sl.value+v*sp.st)});ap(aC,b)}ap(aC,lT);for(let [t,v] of [['âª¢',1],['â«¸',10]]){let b=mk('div',t,S0+CU+'width:5vmin;text-align:center;');ev(b,'click',e=>{e.stopPropagation();uSV(+sl.value+v*sp.st)});ap(aC,b)}let ct=mk('div','',D+'flex-direction:column;'+G1);ap(ct,aC,sl);return{container:ct,lT,sl}},
uL=(i,p,l1)=>{l1&&dL(i,p,l1,l1.nextElementSibling);uc();qR(()=>mo&&J())},hS=e=>{mp(ga.length,i=>ga[i].style.display='none');mp(sl.length,i=>mp(sl[i].length,j=>sl[i][j].style.display='none'));mp(E.length,i=>{E[i][1].style.display='none';E[i][2].style.display='none'})},
iC=(r,j,vs,vs2,sd,i)=>{let d_=`flex-direction:column;flex:1;${G1}`,c_=`${C1}#4af;font-weight:bold;${S1}`,ct1=mk('div','',D+d_),t1=mk('div','Valeur',c_),uF=v=>{mp(s.length,k=>mp(6,m=>s[k][m*9+j]=v));At();qR(()=>mo&&J())};ap(ct1,t1);if(!j){let {container}=cS$(r,j,0,vs[0],0,uF);ap(ct1,container);ap(sd,ct1);return()=>sd.style.display='none'}let dG=mk('div','',D+'gap:2vmin;'),cts=[mk('div','',D+d_),mk('div','',D+d_)],uFg=k=>(v)=>{let {ty}=gX(r);if(ty===1){mp(s.length,i=>s[i][k*9+j]=v)}else if(!ty)mp(s.length,i=>mp(6,m=>s[i][m*9+j]=v));At();qR(()=>mo&&J())},uFp=k=>(v)=>{mp(s.length,i=>uP(s[i],j,k,v));At();qR(()=>mo&&J())};for(let idx=0;idx<2;idx++){let t=mk('div',['G/D','P/B'][idx],C1+(idx?'#4f4':'#4af')+';font-weight:bold;'+S1);ap(cts[idx],t)}mp(vs.length,k=>{let {container}=cS$(r,j,k,vs[k],0,uFg(k));ap(cts[0],container)});mp(vs2.length,k=>{let {container}=cS$(r,j,k,vs2[k],1,uFp(k));ap(cts[1],container)});ap(dG,cts[0],cts[1]);ap(sd,dG);return()=>sd.style.display='none'},
iS=(r,j,b,i,l1,sr,sd)=>{let d_=`flex-direction:column;flex:1;${G1}`,c_=`${C1}#4af;font-weight:bold;${S1}`;if(!j){let v=b[j],uF=v=>{mp(6,k=>s[i][k*9+j]=v)},ct1=mk('div','',D+d_),t1=mk('div','Valeur',c_),uFx=v=>{uF(v);uL(i,j,l1)};ap(ct1,t1);let {container}=cS$(r,j,0,v,0,uFx);ap(ct1,container);ap(sd,ct1);return()=>sd.style.display='none'};let {ty}=gX(r),iv=ty===1?[b[j],b[9+j],b[18+j],b[27+j],b[36+j],b[45+j]]:[b[j],b[9+j]],iv2=[],sls1=[],lTs1=[],sls2=[],lTs2=[];mp(3,k=>iv2.push((b[(k*2)*9+j]+b[(k*2+1)*9+j])/2,b[(k*2+1)*9+j]-b[(k*2)*9+j]));let rO=sIsGD=>{let b=s[i];if(sIsGD){mp(3,k=>{let v1=(b[(k*2)*9+j]+b[(k*2+1)*9+j])/2,v2=b[(k*2+1)*9+j]-b[(k*2)*9+j];sls2[k*2].value=v1;W(lTs2[k*2],gL(r,j,k*2,v1,1).tx);sls2[k*2+1].value=v2;W(lTs2[k*2+1],gL(r,j,k*2+1,v2,1).tx)})}else{mp(iv.length,k=>{sls1[k].value=b[k*9+j];W(lTs1[k],gL(r,j,k,b[k*9+j],0).tx)})}},uFg=k=>(v)=>{let {ty}=gX(r);if(ty===1){s[i][k*9+j]=v}else{if(!j&&!k)mp(6,m=>s[i][m*9+j]=v);else s[i][k*9+j]=v}rO(!1);uL(i,j,l1)},uFp=k=>(v)=>{uP(s[i],j,k,v);rO(!1);uL(i,j,l1)},dG=mk('div','',D+'gap:2vmin;'),cts=[mk('div','',D+d_),mk('div','',D+d_)];for(let idx=0;idx<2;idx++){let t=mk('div',['G/D','P/B'][idx],C1+(idx?'#4f4':'#4af')+';font-weight:bold;'+S1);ap(cts[idx],t)}mp(iv.length,k=>{let {container:ct,lT,sl}=cS$(r,j,k,iv[k],0,uFg(k));sls1.push(sl);lTs1.push(lT);ap(cts[0],ct)});mp(iv2.length,k=>{let {container:ct,lT,sl}=cS$(r,j,k,iv2[k],1,uFp(k));sls2.push(sl);lTs2.push(lT);ap(cts[1],ct)});mp(6,k=>iv2.push(b[(k*2)*9+j],b[(k*2+1)*9+j]));ap(dG,cts[0],cts[1]);ap(sd,dG);return()=>sd.style.display='none'},
gT=(r,j)=>{let {lb,ty}=gX(r),hL=lb,m=hL.match(/(.*)(\(.*\))$/);if(m){let lB=m[1],uN=m[2];if(j>=3&&j<=5){let pS=[];if(~lB.indexOf('Osc')){pS.push('Osc');pS.push(lB.replace('Osc',''))}else pS.push(lB);hL=pS.filter(p=>p.length).join('<br>')+'<br>'+uN}else hL=lB+'<br>'+uN}else hL=lb+'<br>'+(ty?ty==1?'(Hz)':'(tours)':'(sec)');let ig=ty==1?Array(6).fill(r[0][0]):[r[0][0],r[0][0]],ig2=[(r[0][0]+r[0][0])/2,(r[0][0]+r[0][0])/2,(r[0][0]+r[0][0])/2,0,0,0];return{hL,ig,ig2,em:EM[j]}},
gP=(p,r,j,i,b,isG)=>{let w=mk('div','',isG?S5G:S5),l1=c('div'),sr=c('div'),sd=mk('div','',S6),iF=null;isG?ga[j]=sd:sl[i][j]=sd;if(isG){let {hL,ig,ig2,em}=gT(r,j),l3=mk('div',em,S2),val1=mk('div','',S1+C1+'#000;');val1.innerHTML=hL;iF=()=>iC(r,j,ig,ig2,sd);ap(w,l3,val1,sd)}else{C(l1,S1+C1+'#000');C(sr,S1+C1+'#000');dL(i,j,l1,sr);iF=()=>iS(r,j,b,i,l1,sr,sd);ap(w,l1,sr,sd)}iF();ev(w,'click',e=>{e.stopPropagation();hS();sd.style.top=(gR(w).bottom+5)+'px';sd.style.display='block'});ap(p,w);pb.push(w);return w},
K=()=>{let k_=`position:sticky;top:0;left:0;right:0;z-index:999;background:linear-gradient(45deg,#ff0,#f0f,#0ff,#0f0);${PD+S1}`,h_=`display:flex;justify-content:space-between;align-items:center;`,g=mk('div','',k_),h=mk('div','',D+h_),ht=mk('div','ðŸŒˆSpiraStrober',C1+'#000;'+S2+'cursor:default;'),hb=mk('div','',D+G1),BTA=[()=>go(()=>{for(let k=1;k<s.length;k++)s[k]=cp(s[0])}),()=>go(()=>{for(let k=1;k<s.length;k++){let n=cp(s[0]);if(k&1)n=sw(n);s[k]=n}}),()=>go(()=>{mp(s.length,k=>FX(s[k]))}),()=>go(()=>{mp(s.length,k=>s[k]=rV())}),()=>go(()=>{mp(s.length,k=>UN(s[k]))}),()=>go(()=>{mp(s.length,k=>PO(s[k]))})];mp(6,i=>{let b=mk('div',BT[i],IB);ev(b,'click',BTA[i]);ap(hb,b)});ap(h,ht,hb);let p=mk('div','',S4),wM_=`${S5G+D}flex-direction:row;gap:0.5vmin;`,iC_=`${ICO}`;mp(9,j=>{let w=gP(p,P.p[j],j,null,null,!0);GB.push(w)});let wM=mk('div','',wM_),bD=mk('div','ðŸ”»',iC_),bu=mk('div','ðŸ”º',iC_),br=mk('div','â™»ï¸',iC_);ap(wM,bD,bu,br);ap(p,wM);ap(g,h,p);return g},
L=i=>{let a_=c('div'),b=s[i],sL=s.length,wA_=S5+D+'flex-direction:row;gap:0.5vmin;flex-shrink:0;',sW='position:absolute;top:0;right:0;width:28vmin;background:'+Ct+';'+BR+'z-index:10;'+D+'flex-wrap:wrap;align-items:center;justify-content:around;padding:1vmin;gap:1vmin;display:none;',iR_=`${IR}`,iY_=`${IY}`,iG_=`${IG}`;C(a_,`border:0;border-radius:0;background:${H(i,50)};${P5}position:relative;${S1}`+D+'align-items:center;justify-content:space-between;gap:0.5vmin;');let aD=()=>sL>1&&sE(()=>s.splice(i,1)),pd=mk('div','',D+'align-items:center;'+G1+'flex-grow:1;min-width:0;');sl[i]=[];mp(9,j=>gP(pd,P.p[j],j,i,b,!1));let ms=[mk('div','',sW),mk('div','',sW)],ac=[{style:iG_,rm:'cM',target:ms[0],actions:[()=>sE(()=>s.splice(i+1,0,cp(s[i]))),()=>sE(()=>s.splice(i+1,0,sw(cp(s[i])))),()=>sE(()=>sE(()=>{let a_=rV();FX(a_);s.splice(i+1,0,a_)})),()=>sE(()=>s.splice(i+1,0,rV())),()=>sE(()=>sE(()=>{let a_=rV();UN(a_);s.splice(i+1,0,a_)})),()=>sE(()=>s.splice(i+1,0,rS()))]},{style:iY_,rm:'mM',target:ms[1],actions:[()=>i&&sE(()=>s[i]=cp(s[i-1])),()=>sE(()=>s[i]=sw(cp(s[i]))),()=>sE(()=>FX(s[i])),()=>sE(()=>s[i]=rV()),()=>sE(()=>UN(s[i])),()=>sE(()=>PO(s[i]))]}];mp(2,idx=>{let {style:st,rm,target:tg,actions:f}=ac[idx];mp(6,k=>{let b=mk('div',BT[k],st+IM);ev(b,'click',e=>{e.stopPropagation();RM_T=rm;RM_I=i;f[k]()});ap(tg,b)})});let wA=mk('div','',wA_),bD=mk('div',BT[6],iR_);C(bD,`opacity:${sL<=1?.3:1};${bD.style.cssText}`);ev(bD,'click',aD);let bM=mk('div','ðŸ“',iR_);ev(bM,'click',e=>{e.stopPropagation();hS();ms[1].style.display='flex'});let bA$=mk('div','âœ´ï¸',iY_);ev(bA$,'click',e=>{e.stopPropagation();hS();ms[0].style.display='flex'});ap(wA,bM,bA$,bD);ap(pd,wA);ap(a_,pd,...ms);return[a_,ms[0],ms[1]]},
uc=()=>{mp(E.length,i=>E[i][0].style.background=H(i,50))},At=()=>{E.length=0;sl.length=0;pb.length=0;mp(GB.length,i=>pb.push(GB[i]));U[4].replaceChildren();mp(s.length,i=>{sl[i]=[];let b=L(i);E[i]=b;ap(U[4],b[0])});P$A=P$(s);T$(s);z();J();if(RM_T&&RM_I!==-1&&E[RM_I]){let mE=RM_T==='mM'?E[RM_I][2]:E[RM_I][1];if(mE){hS();mE.style.display='flex'}RM_T=null;RM_I=-1}},
z=()=>W(U[5],`Configuration-${s.length-1} sÃ©quences-${Tt.toFixed(2)}s`),
eA=async P=>{let t=Tt;$cancelToken++;let T=$cancelToken;if(t<=0||s.length<=1)throw new Error('durÃ©e nulle');let f=~~(t*SR),F=18200,M=20,c=sC,u=c<3?a:a/3;t0a=performance.now();try{P(0,'GÃ©nÃ©ration audio');await wI();C$(T);let p=tp*F/SR,m=tp*M/SR,S=32768,C_=(f+S-1)>>S.toString(2).length-1,W=44+f*4,A=new ArrayBuffer(W),V=new DataView(A),wS=(o,v)=>{for(let i=0;i<v.length;i++)V.setUint8(o+i,v.charCodeAt(i))};wS(0,'RIFF');V.setUint32(4,W-8,1);wS(8,'WAVE');V.setUint32(12,0x20746d66,1);V.setUint32(16,16,1);V.setUint16(20,1,1);V.setUint16(22,2,1);V.setUint32(24,SR,1);V.setUint32(28,SR*4,1);V.setUint16(32,4,1);V.setUint16(34,16,1);wS(36,'data');V.setUint32(40,f*4,1);let O=44,h=0,H=0,w=v=>{V.setInt16(O,v*32767|0,1);O+=2},ln=t$A.length,i_seg=0,pC=[0,0,0,0,0,0],fC$=c===3?[FC[0],FC[1],FC[2]]:[FC[3],FC[3],FC[3]],pI=fC$.map(f=>tp*f/SR);for(let k=0;k<C_;k++){let s_=k*S,l=mi((k+1)*S,f)-s_;for(let j=0;j<l;j++){let ix=s_+j,t_global=ix/SR;while(i_seg<ln-1&&t_global>=t$A[i_seg+1].t)i_seg++;let {t:t_start,dT,sg,sn$,hO}=t$A[i_seg],t=t_global-t_start,vL=0,vR=0;for(let i=0;i<3;i++){let N=c>=3||c===i;if(N){let ch=i*2,cO=ch*9,hC=hO.C[0],hM=hO.M[0],hA=hO.A[0],v=cV(sg,sn$,t,dT,hC,hM,hA,1,cO)*sn(pC[ch]);vL+=v;pC[ch]+=pI[i];if(pC[ch]>=tp)pC[ch]-=tp;ch=i*2+1;cO=ch*9;hC=hO.C[1];hM=hO.M[1];hA=hO.A[1];v=cV(sg,sn$,t,dT,hC,hM,hA,1,cO)*sn(pC[ch]);vR+=v;pC[ch]+=pI[i];if(pC[ch]>=tp)pC[ch]-=tp}}if(c===3){let Q=sn(h),Z=sn(H),Qh=Q*am;w(vL*a+Qh*(1-Z));w(vR*a+Qh*(1+Z));h+=p;if(h>=tp)h-=tp;H+=m;if(H>=tp)H-=tp}else{w(vL*u);w(vR*u)}}if(!(k&7)){await wI();C$(T);P((k+1)/C_,`GÃ©nÃ©ration: ${~~((k+1)/C_*100)}%`)}}P(1,'Finalisation');await wI();C$(T);aP.src=URL.createObjectURL(new Blob([A],{type:'audio/wav'}));let E_=performance.now()-t0a;P(1,`âœ… TerminÃ© (${E_.toFixed(2)}ms)`)}catch(e){if(e==='A')throw new Error('OpÃ©ration annulÃ©e.');throw e}},
sC=0,aP,fC;U=['body','h1','h2','p','div','h2'].map(c);C(U[0],'padding-bottom:0;padding-top:0;');ap(U[0],U[1],U[3]);let tC=mk('div','','overflow-x:auto;width:100%;'),tW=mk('div','','min-width:fit-content;display:flex;flex-direction:column;');ap(tW,K(),U[4]);ap(tC,tW);ap(U[0],tC,U[5]);ap(e,U[0]);mp(Et,()=>s.push(rS()));At();ev(window,'load',()=>{let S_EU='position:relative;width:100%;padding:0.5vmin 1vmin;min-height:12vmin;background:#111;z-index:1000;'+D+'flex-direction:column;'+G1+'border-top:1px solid #f83;',S_CL=C1+'#000;'+D+'align-items:center;'+S3+'gap:5px;'+H5+'width:18vw;',S_CS=H5+'background:#f83;color:white;'+BR+S3;fC=mk('div','','position:sticky;bottom:0;left:0;right:0;z-index:0;width:100%;');let eU=mk('div','',S_EU),eR=mk('div','',S4),cL=mk('label','',S_CL),cS$=mk('select','',S_CS);ap(fC,mo);sC=3;let opts=['ðŸ”´Rouge','ðŸŸ¢Vert','ðŸ”µBleu','ðŸŒˆSpectra','â˜€ï¸UnifiÃ©'];mp(5,i=>{let o=mk('option',opts[i],'');o.value=i;ap(cS$,o)});cS$.value=sC;ev(cS$,'change',e=>sC=parseInt(e.target.value));ap(cL,cS$);let bM=mk('div','',D+'align-items:center;');ap(bM,cL);let sP=(tx,ps)=>{let tp$=mk('div',tx,S9),cl=mk('div','âŒ','position:absolute;top:1vmin;right:1vmin;'+IR);ev(cl,'click',()=>tp$.remove());ps&&ap(tp$,...ps);ap(tp$,cl);ap(d.body,tp$);setTimeout(()=>d.addEventListener('click',()=>tp$.parentNode&&tp$.remove(),{once:!0}),500)},tF=[mk('div',"âˆ«T(Xâ‚™)=Xâ‚™â‹…t+(Xâ‚™â‚Šâ‚-Xâ‚™)tÂ²/(2â³)\nT(Xâ‚™)=Xâ‚™+(Xâ‚™â‚Šâ‚-Xâ‚™)t/â³\nT'(Xâ‚™)=(Xâ‚™â‚Šâ‚-Xâ‚™)/â³ \nOâ‚™=âˆ«T(ðŸ’«â‚™)+T(ðŸ“Œâ‚™)+Oâ‚€,â‚™\nAâ‚™=âˆ«T(â­â‚™)+T(ðŸ“â‚™)+Aâ‚€,â‚™",C1+'#f90;'+S0),mk('div',"Oâ‚€,â‚™=(ðŸ’«â‚™+ðŸ’«â‚™â‚‹â‚)â³/2+ðŸ“Œâ‚™+Oâ‚€,â‚™â‚‹â‚\nAâ‚€,â‚™=(â­â‚™+â­â‚™â‚‹â‚)â³/2+ðŸ“â‚™+Aâ‚€,â‚™â‚‹â‚\nÏ†â‚€,â‚™=(ðŸ””â‚™+ðŸ””â‚™â‚‹â‚)â³/2+ðŸš©â‚™+Ï†â‚€,â‚™â‚‹â‚+ðŸŒ€â‚™/2â‹…sin(2Ï€â‹…Oâ‚€,â‚™)",C1+'#9f0;'+S0),mk('div',"Sâ‚™=(sin(2Ï€â‹…Ï†â‚™)+1)/2â‹…((1-T(ðŸ®â‚™))â‹…(sin(2Ï€â‹…Aâ‚™)+1)/2+T(ðŸ®â‚™))\nÏ†â‚™=âˆ«T(ðŸ””â‚™)+T(ðŸš©â‚™)+Ï†â‚€,â‚™+T(ðŸŒ€â‚™)/2â‹…sin(2Ï€â‹…Oâ‚™)\nfâ‚™=T(ðŸ””â‚™)+T'(ðŸš©â‚™)+T(ðŸŒ€â‚™)â‹…T(ðŸ’«â‚™)â‹…Ï€â‹…cos(2Ï€â‹…Oâ‚™)\nkâ‚™=T'(ðŸ””â‚™)-T(ðŸŒ€â‚™)â‹…T(ðŸ’«â‚™)Â²â‹…2Ï€Â²â‹…sin(2Ï€â‹…Oâ‚™)",C1+'#f09;'+S0)],bL=mk('div','ðŸ’¡',IB+B.replace('100%','7vw')+F_CEN+H5);ev(bL,'click',e=>{e.stopPropagation();sP('',tF)});let eB=mk('button','ðŸŽµ GÃ©nÃ©rer',B_BT+'background:#4af;flex-grow:1;min-width:40vw;'),eBg=mk('div','','position:absolute;left:0;top:0;height:100%;width:0%;background:linear-gradient(90deg,#0f0,#4f4);transition:width 0.3s;z-index:0;'),eBt=mk('span','ðŸŽµ GÃ©nÃ©rer','position:relative;z-index:1;color:black;');ap(eB,eBg,eBt);let bS=mk('button','â¹ï¸ Stop',B_BT+'background:#f44;width:15vw;');ev(bS,'click',()=>{$cancelToken++;eBt.textContent='â¹ï¸ AnnulÃ©';eBg.style.width='0%';eB.disabled=false;setTimeout(()=>{eBt.textContent='ðŸŽµ GÃ©nÃ©rer'},2000)});aP=mk('audio','',B+'height:5vmin;');aP.controls=!0;ev(eB,'click',async()=>{eB.disabled=!1;eBg.style.width='0%';try{await eA((p,mg)=>{eBg.style.width=(p*100)+'%';eBt.textContent=mg?`â³ ${~~(p*100)}% - ${mg}`:`â³ ${~~(p*100)}%`});let elapsedaf=performance.now()-t0a;eBg.style.width='100%';eBt.textContent=`âœ… TerminÃ© (${elapsedaf.toFixed(2)}ms)`;setTimeout(()=>{eBt.textContent='ðŸŽµ GÃ©nÃ©rer';eBg.style.width='0%';eB.disabled=!1},2000)}catch(er){console.error(er);if(er.message!=='OpÃ©ration annulÃ©e.')eBt.textContent='â¹ï¸ Erreur';else eBt.textContent='â¹ï¸ AnnulÃ©';setTimeout(()=>{eBt.textContent='ðŸŽµ GÃ©nÃ©rer';eBg.style.width='0%';eB.disabled=!1},2000)}});ap(eR,bL,bM,eB,bS);ap(eU,eR,aP);ap(fC,mo);ap(fC,eU);ap(d.body,fC);d.addEventListener('click',hS);At()});
</script>