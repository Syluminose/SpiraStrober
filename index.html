<!DOCTYPE html>
<meta charset="utf-8">
<script>
// MIT License Â© 2025 Syluminose
const d=document,c=z=>d.createElement(z),e=d.documentElement,s=[],E=[],ca=new Map,
{max:ma,min:mi,sin:ms,cos:mc,random:mr,abs:ab}=Math,
gR=t=>t.getBoundingClientRect(),
W=(t,a)=>t.textContent=a,
C=(t,k)=>t.style.cssText=k,
mk=(g,t,k)=>{const l=c(g);t&&W(l,t);k&&C(l,k);return l},
rg=(mn,mx,st,v)=>Object.assign(c('input'),{type:'range',value:v,min:mn,max:mx,step:st,style:'width:100%;margin:1dvw;height:6dvw'}),
EM=['â³','ðŸ””','âš¡','ðŸŒŠ','ðŸ’«','ðŸŒˆ'],BT=['ðŸ”¶','ðŸŽ²','ðŸ”'],COL=['#f44','#fb4','#4af','#4f4','#f4f'],
A='position:absolute;',F='position:fixed;',D1='display:flex;',B='background:',C1='color:',BR='border-radius:1dvw;',CU='cursor:pointer;',FS='font-size:',W1='width:100%;',MG='margin:1dvw;',PD='padding:1dvw;',G1='gap:1dvw;',F1=FS+'3dvw;',F2=FS+'5dvw;',S2=D1+'justify-content:center;'+G1+PD,S4=D1+'align-items:center;'+G1+MG+'overflow-x:auto;',S5='position:relative;'+CU+PD+BR+C1+'white;min-width:7dvw;'+D1+'flex-direction:column;align-items:center;height:12dvw;justify-content:center;'+B,S6=F+'left:10dvw;width:80dvw;z-index:1000;'+B+'#000;'+BR+PD+'display:none',S9=F+'top:50%;left:50%;transform:translate(-50%,-50%);width:90dvw;'+B+'#000;'+C1+'#fff;'+PD+BR+F1+'z-index:1001;white-space:pre-line;border:2px solid #fb4',
FP={p:[[EM[0],[0,30],[10,10],1,'Duree(s)',0],[EM[1],[1,40],[1,40],.1,'Freq(Hz)',1],[EM[2],[-.5,.5],[-.5,.5],.01,'Phase(tours)',1],[EM[3],[0,15],[0,15],1,'OscAmp(Hz)',1],[EM[4],[.1,3],[.1,3],.1,'OscFreq(Hz)',1],[EM[5],[0,360],[0,0],1,'Couleur(teinte)',2]]},
G=i=>`hsl(${ma(0,mi(270,ab(s[i][0][1]-s[i][1][1])*9))},100%,50%)`,
H=(i,l)=>i>=s.length-1?`hsl(${ma(0,mi(270,ab(s[i][0][1]-s[i][1][1])*9))},100%,${l}%)`:`linear-gradient(to bottom,${Array.from({length:9},(_,j)=>`hsl(${ma(0,mi(270,ab((s[i][0][1]+(s[i+1][0][1]-s[i][0][1])*j/8)-(s[i][1][1]+(s[i+1][1][1]-s[i][1][1])*j/8))*9))},100%,${l}%)`).join(',')})`,
gr=p=>[EM[0],EM[1],EM[3],EM[5]].includes(p[0])?~~(mr()*(p[2][1]-p[2][0]+1))+p[2][0]:+(mr()*(p[2][1]-p[2][0])+p[2][0]).toFixed(2),
rv=()=>[FP.p.map(gr),FP.p.map((p,i)=>p[5]?p[5]==2?50:gr(p):s[0]?.[0]?.[i]??gr(p))],
cp=a=>structuredClone(a),
sw=a=>{FP.p.forEach((pr,k)=>{pr[5]&&k&&([a[0][k],a[1][k]]=[a[1][k],a[0][k]])});return a};
let U,tm,mo,sl=[],ga=[],wk,cv,zm,info,zo=0,zs=1,dt=[],wkB=`
const {max:ma,min:mi,sin:ms,cos:mc,PI:pi}=Math,tp=pi*2;
const vc=(n,f0,f1,T,ph0,ph1,oA,oF,phO,fi,b8,phC)=>{
const inv=1/T,dt=T/n,A_ph=oA/(2*tp*oF);
if(fi==1){
const cf=(f1-f0)*inv*.5,lin=(f0+(ph1-ph0)*inv)*dt;
const arr=b8?new Uint8Array(n):new Float32Array(n);
for(let i=0;i<n;i++){const t=i*dt,ph_osc=A_ph*ms(tp*oF*t+phC),val=ms(tp*(phO+cf*t*t+lin*i+ph_osc));arr[i]=b8?~~((val*.5+.5)*255):val}
return {v:arr,mn:0,mx:255}
}
const arr=new Float32Array(n);
let mn=Infinity,mx=-Infinity,val;
if(fi==2){
const v=(f1-f0)*inv,b=f0+(ph1-ph0)*inv;
for(let i=0;i<n;i++){const t=i*dt,f_osc=oA*mc(tp*oF*t+phC)*.5;val=v*i*dt+b+f_osc;arr[i]=val;if(val<mn)mn=val;if(val>mx)mx=val}
}else{
const Ak=tp*oF*oA*.5,k=(f1-f0)*inv;
for(let i=0;i<n;i++){const t=i*dt,k_osc=Ak*mc(tp*oF*t+phC);val=k+k_osc;arr[i]=val;if(val<mn)mn=val;if(val>mx)mx=val}
}
return {v:arr,mn,mx}
};
onmessage=e=>{
const {np,Tt,ss,cch}=e.data,dt_L=[],dt_R=[],dt=[],nc=new Map;

[1,2,3].forEach(fi=>{
const pl_f=fi==1?new Uint8Array(np):new Float32Array(np),pr_f=fi==1?new Uint8Array(np):new Float32Array(np);
let to=0,phL=0,phR=0,phCL=0,phCR=0,mnL=Infinity,mxL=-Infinity,mnR=Infinity,mxR=-Infinity;
ss.slice(0,-1).forEach((sg,ix)=>{
const T=sg[0][0],ns=~~(np*T/Tt),[f0L,f1L,ph0L,ph1L,oAL,oFL]=[sg[0][1],ss[ix+1][0][1],sg[0][2],ss[ix+1][0][2],sg[0][3],sg[0][4]],[f0R,f1R,ph0R,ph1R,oAR,oFR]=[sg[1][1],ss[ix+1][1][1],sg[1][2],ss[ix+1][1][2],sg[1][3],sg[1][4]];
ckL=\`\${fi}_L_\${ns}_\${f0L}_\${f1L}_\${T}_\${ph0L}_\${ph1L}_\${oAL}_\${oFL}_\${phL}_\${phCL}\`,ckR=\`\${fi}_R_\${ns}_\${f0R}_\${f1R}_\${T}_\${ph0R}_\${ph1R}_\${oAR}_\${oFR}_\${phR}_\${phCR}\`,
datL=cch[ckL]??vc(ns,f0L,f1L,T,ph0L,ph1L,oAL,oFL,phL,fi,fi==1,phCL),datR=cch[ckR]??vc(ns,f0R,f1R,T,ph0R,ph1R,oAR,oFR,phR,fi,fi==1,phCR),vL=datL.v,vR=datR.v;
cch[ckL]??=datL;cch[ckR]??=datR;nc.set(ckL,1).set(ckR,1);
pl_f.set(vL,to);pr_f.set(vR,to);
if(fi!=1){mnL=mi(mnL,datL.mn);mxL=ma(mxL,datL.mx);mnR=mi(mnR,datR.mn);mxR=ma(mxL,mxR)}
to+=ns;phL+=f0L*T+(f1L-f0L)*T/2+(ph1L-ph0L);phR+=f0R*T+(f1R-f0R)*T/2+(ph1R-ph0L);phCL+=tp*oFL*T;phCR+=tp*oFR*T
});
const gm_val = fi==1?[0,255]:[mi(mnL,mnR),ma(mxL,mxR)];

let pL_final=pl_f,pR_final=pr_f;
if(fi != 1){
let range = gm_val[1] - gm_val[0]||1,
U16M = 65535;
pL_final = new Uint16Array(np);
pR_final = new Uint16Array(np);
    
for (let i=0;i<np;i++) {pL_final[i]=ma(0, mi(U16M, ~~((pl_f[i]-gm_val[0])/range*U16M)));
pR_final[i]=ma(0,mi(U16M,~~((pr_f[i]- gm_val[0])/range*U16M)));}}
dt_L.push({p:pL_final,gm:gm_val});
dt_R.push({p:pR_final,gm:gm_val});
});
let types=[0, 1, 2],
base_dt_arrs = [dt_L, dt_R];
for (let typeIndex of types) {
for (let i = 0; i < 2; i++) {
for (let j = 0; j < 3; j++) {
dt.push(base_dt_arrs[i][typeIndex]);}}}

Object.keys(cch).forEach(k=>nc.has(k)||delete cch[k]);
postMessage({dt,cch})
}`,
ig=()=>{wk?.terminate();wk=new Worker(URL.createObjectURL(new Blob([wkB],{type:'text/javascript'})))};
ig();
const dr=(c,o,z,T)=>{
if(!c)return;
let x=c.getContext('2d'),r=gR(c),dp=devicePixelRatio;
c.width=r.width*dp;c.height=r.height*dp;x.scale(dp,dp);
x.imageSmoothingEnabled = true; 
x.imageSmoothingQuality = 'high';
x.lineCap='round';x.lineJoin='round';
x.fillStyle=o?'#000':'#111';
x.lineWidth=o?2:1.5;
x.fillRect(0,0,r.width,r.height);
if(!dt.length)return;
const h=r.height/18;
const colorMap = ['#f44','#4f4','#44f'];
const labelMap = [
'Sg-RG','Sg-VG','Sg-BG',
'Sg-RD','Sg-VD','Sg-BD',
'Fq-RG','Fq-VG','Fq-BG',
'Fq-RD','Fq-VD','Fq-BD',
'Ch-RG','Ch-VG','Ch-BG',
'Ch-RD','Ch-VD','Ch-BD'];

dt.forEach((d,gi)=>{
let typeIndex = ~~(gi / 6),
isUint16 = typeIndex > 0, st=~~(o*d.p.length),ed=mi(d.p.length,~~((o+z)*d.p.length)),
zp=o?d.p.subarray(st,ed):d.p,
min_p = isUint16 ? 0 : d.gm[0], max_p = isUint16 ? 65535 : d.gm[1], 
rg_plot=max_p-min_p||1,yb=gi*h,h2=h/2; 
const plotColor = colorMap[gi % 3];

x.strokeStyle=plotColor;
let pW=r.width,dL=zp.length,
p_to_draw=zp,sc_to_draw=r.width/dL;

if (!o&&(dL>pW*4)) {
let target_len=pW*4,step=dL/target_len;
p_to_draw=new Float32Array(target_len);
for (let i=0;i<target_len;i++) {
const original_index=~~(i*step); 
p_to_draw[i]=zp[original_index];}
sc_to_draw=r.width/target_len;}

x.beginPath();
for(let k=0;k<p_to_draw.length;k++){
let x_coord = k * sc_to_draw;
let y_coord = isFinite(p_to_draw[k]) ? yb+h-((p_to_draw[k]-min_p)/rg_plot)*h : yb+h2;
x[k?'lineTo':'moveTo'](x_coord, y_coord);
}
x.stroke()

x.fillStyle='#fb4';x.font=(o?14:12)+'px sans-serif';
x.fillText(labelMap[gi],o?6:4,yb+(o?10:8))
});
o&&x.fillText(`ZoomÃ—${(1/z).toFixed(1)} t=${(o*T).toFixed(2)}s`,r.width-90,18)
},
J=()=>{
clearTimeout(tm);
ig();
tm=setTimeout(()=>{
const Tt=s.slice(0,-1).reduce((a,b)=>a+b[0][0],0);
if(!mo){
Object.assign(d.body.style,{paddingBottom:'33dvh',margin:'0'});
mo=mk('div','',F+'bottom:0;left:0;right:0;height:33dvh;'+B+'#000;'+C1+'#fff;border-top:2px solid #fff;');
cv=mk('canvas','','border:1px solid #fb4;'+W1+'height:100%;display:block;');
zm=mk('canvas','',W1+'height:100%;display:block;min-height:0;'+B+'#000');
info=mk('div','',A+'top:0.2dvw;right:0.5dvw;'+C1+'#fb4;'+F1+'pointer-events:none;z-index:101');
const ctn1=mk('div','',W1+'height:100%;position:relative;min-height:0');
ctn1.append(info,cv);mo.append(ctn1);d.body.append(mo);
cv.onclick=()=>{
let T=s.slice(0,-1).reduce((a,b)=>a+b[0][0],0), zoomModal=mk('div','',F+'top:34dvh;left:0dvw;width:100dvw;height:33dvh;'+B+'#000;'+C1+'#fff;'+BR+F1+'z-index:1001;display:flex;flex-direction:column;align-items:center;border:2px solid #fb4');
    
let zoomCanvasWrapper=mk('div','',W1+'height:100%;position:relative;min-height:0;'), cl=mk('div','âŒ',A+'top:0.5dvw;right:0.5dvw;'+C1+'#f44;'+F2+CU+'z-index:102');
cl.onclick=()=>zoomModal.remove();
zoomTimeInfo=mk('div',`t=${(zo*T).toFixed(2)}s-${((zo+zs)*T).toFixed(2)}s`,A+'top:2dvw;right:5dvw;'+C1+'#fb4;'+F1+'pointer-events:none;z-index:102');
zoomCanvasWrapper.append(zm, zoomTimeInfo, cl); zoomModal.append(zoomCanvasWrapper);d.body.append(zoomModal);dr(zm,zo,zs,T); zm.onmousemove=zm.ontouchmove=e=>{let rt=gR(e.target),x=((e.touches?.[0]??e).clientX-rt.left)/rt.width,T=s.slice(0,-1).reduce((a,b)=>a+b[0][0],0);
zo=ma(0,mi(1-zs,x-zs/2));dr(zm,zo,zs,T);W(zoomTimeInfo,`t=${(zo*T).toFixed(2)}s-${((zo+zs)*T).toFixed(2)}s ZoomÃ—${(1/zs).toFixed(1)}`)};
zm.onwheel=e=>{e.preventDefault();
let nz=ma(.01,mi(1,zs*(1+e.deltaY*-.001))),T=s.slice(0,-1).reduce((a,b)=>a+b[0][0],0);
zo=ma(0,mi(1-nz,zo+(zs-nz)/2));zs=nz;dr(zm,zo,zs,T);W(zoomTimeInfo,`t=${(zo*T).toFixed(2)}s-${((zo+zs)*T).toFixed(2)}s ZoomÃ—${(1/zs).toFixed(1)}`)}}}
zs=1/Tt;zo=0;
let np=~~(Tt*441),cch=Object.fromEntries(ca);
wk.onmessage=e=>{
let {dt:ndt,cch:nc}=e.data;
dt=ndt;
Object.keys(nc).forEach(k=>ca.set(k,nc[k]));
queueMicrotask(()=>{
dr(cv,0,1,Tt);dr(zm,zo,zs,Tt);W(info,`t=${(zo*Tt).toFixed(2)}s-${((zo+zs)*Tt).toFixed(2)}s`)
})
};
wk.postMessage({np,Tt,ss:s,cch})
},500)
},
K=()=>{
const g=mk('div','','border:1dvw solid;border-image:linear-gradient(45deg,#ff0,#f0f,#0ff,#0f0,#ff0) 1;'+BR+B+'linear-gradient(45deg,#ff0,#f0f,#0ff,#0f0);'+PD+MG+'position:relative;'+F1),
h=mk('div','',D1+'justify-content:space-between;align-items:center;'),
ht=mk('h3','ðŸ§°Parametres Generaux',C1+'#000;'+F2),
hb=mk('div','',D1+G1),
p=mk('div','',S4);
BT.forEach((em,i)=>{const b=mk('div',em,CU+F2+C1+'#29f;');b.onclick=[()=>s.length&&(s.forEach((sg,k)=>k&&(s[k]=cp(s[0]))),At()),()=>(s.forEach((_,k)=>s[k]=rv()),At()),()=>s.length&&(s.forEach((sg,k)=>{if(k){let n=cp(s[0]);k%2&&(n=sw(n));s[k]=n}}),At())][i];hb.append(b)});
h.append(ht,hb);
FP.p.forEach((pr,j)=>{
const w=mk('div','',S5+(j==5?'hsl(180,100%,50%)':'#000')),l3=mk('div',pr[0],F2),sd=mk('div','',S6);
ga[j]=sd;
const [il,ir]=[rg(pr[1][0],pr[1][1],pr[3],pr[1][0]),rg(pr[1][0],pr[1][1],pr[3],j==5?50:pr[1][0])];
j==5&&Object.assign(ir,{type:'range',value:0,min:0,max:100,step:1});
const ll=mk('div',j==5?'ðŸŒˆTeinte '+il.value:'ðŸ«²Gauche '+il.value,C1+'#4f4;'),rl=mk('div',j==5?'ðŸ’¡Luminosite '+ir.value:'ðŸ«±Droite '+ir.value,C1+'#f44;');
pr[5]||C(rl,'display:none');sd.append(ll,il,rl,ir);
const hs=()=>sd.style.display='none',ag=sd=>{const v=+(sd=='G'?il:ir).value;s.forEach(sg=>(j==5?sg[sd=='G'?0:1][j]=v:pr[5]?sg[sd=='G'?0:1][j]=v:(sg[0][j]=sg[1][j]=v)));At()};
w.onclick=e=>{
e.stopPropagation();
ga.forEach(el=>el.style.display='none');
const r=gR(w);
sd.style.top=(r.bottom+5)+'px';
sd.style.display='block';
w.style.background=j==5?'hsl(180,100%,30%)':'#000';
setTimeout(()=>d.addEventListener('click',hs,{once:!0}),10)
};
[il,ir].forEach((i,k)=>i.oninput=e=>{
j==5?(W([ll,rl][k],['ðŸŒˆTeinte ','ðŸ’¡Luminosite '][k]+e.target.value),w.style.background=`hsl(${k?il.value:e.target.value},100%,${k?e.target.value:50}%)`):W([ll,rl][k],['ðŸ«²Gauche ','ðŸ«±Droite '][k]+e.target.value);
ag(k?'D':'G');mo&&J()
});
[il,ir,sd].forEach(el=>el.onclick=e=>e.stopPropagation());
w.append(l3,sd);p.append(w)
});
g.append(h,p);return g
},
L=i=>{
const a=['body','h1','p','div'].map(c),b=s[i],cl=G(i),gr=H(i,75),br=H(i,50),tc=cl.replace('50%','75%');
C(a[0],'border:1dvw solid;border-image:'+br+' 1;'+BR+B+gr+';'+PD+MG+'position:relative;'+F1);
const ht=mk('div','',D1+'justify-content:space-between;align-items:center;'),
ti=mk('h1','ðŸ“'+i,C1+'#000;'+F2),
hb=mk('div','',D1+G1);
['âŒ','ðŸ’¡','ðŸ“','ðŸ”¶','ðŸŽ²','ðŸ”'].forEach((em,k)=>{
const bt=mk('div',em,CU+F2+C1+COL[k%5]);
!k&&(bt.style.opacity=s.length<=1?.3:1);
if(k==1)bt.onclick=e=>{
e.stopPropagation();
const tp=mk('div','',S9),
t1=mk('div','Signal = sin(âš¡)',C1+'#fb4;'),
t2=mk('div','âš¡ = (ðŸ””1-ðŸ””0)tÂ²/2â³ + ðŸ””0t + (âš¡1-âš¡0)t/â³ + Ï†â‚€',C1+'#fb4;'),
t3=mk('div',' + (ðŸŒŠ/2)Â·sin(2Ï€Â·ðŸ’«Â·t + Ï†câ‚€) / 2Ï€ðŸ’«',C1+'#f44;'),
t4=mk('div','freq = dâš¡/dt = (ðŸ””1-ðŸ””0)t/â³ + ðŸ””0 + (âš¡1-âš¡0)/â³',C1+'#fb4;'),
t5=mk('div',' + (ðŸŒŠ/2)Â·cos(2Ï€Â·ðŸ’«Â·t + Ï†câ‚€)',C1+'#f44;'),
t6=mk('div','chirp = dÂ²âš¡/dtÂ² = (ðŸ””1-ðŸ””0)/â³',C1+'#fb4;'),
t7=mk('div',' - Ï€Â·ðŸ’«Â·ðŸŒŠÂ·sin(2Ï€Â·ðŸ’«Â·t + Ï†câ‚€)',C1+'#f44;'),
cl=mk('div','âŒ',A+'top:1dvw;right:1dvw;'+C1+'#f44;'+F2+CU);
cl.onclick=()=>tp.remove();tp.append(t1,t2,t3,t4,t5,t6,t7,cl);d.body.append(tp);setTimeout(()=>d.addEventListener('click',()=>tp.parentNode&&tp.remove(),{once:!0}),10)
};
else if(k==2)bt.onclick=e=>{e.stopPropagation();const tp=mk('div',FP.p.map(p=>p[0]+p[4]).join('\n'),S9),cl=mk('div','âŒ',A+'top:1dvw;right:1dvw;'+C1+'#f44;'+F2+CU);cl.onclick=()=>tp.remove();tp.append(cl);d.body.append(tp);setTimeout(()=>d.addEventListener('click',()=>tp.parentNode&&tp.remove(),{once:!0}),10)};
else bt.onclick=[()=>s.length>1&&(s.splice(i,1),At()),null,null,()=>i&&(s[i]=cp(s[i-1]),At()),()=>(s[i]=rv(),At()),()=>(s[i]=sw(cp(s[i])),At())][k];
hb.append(bt)
});
ht.append(ti,hb);a[0].append(ht);
const pd=mk('div','',S4);
sl[i]=[];
FP.p.forEach((pr,j)=>{
const w=mk('div','',S5+(j==5?`hsl(${b[0][j]||0},100%,${b[1][j]||50}%)`:'#000')),l3=mk('div',pr[0],F2),[sl1,sr]=[c('div'),c('div')],[lv,rv]=[b[0][j],b[1][j]];
j==5?[sl1,sr].forEach(el=>C(el,'display:none')):(!pr[5]||lv==rv)?(W(sl1,lv),C(sr,'display:none')):(W(sl1,lv),W(sr,rv));
const sd=mk('div','',S6);
sl[i][j]=sd;
const [il,ir]=[rg(pr[1][0],pr[1][1],pr[3],lv),rg(pr[1][0],pr[1][1],pr[3],!pr[5]||j==5?rv||50:rv)];
pr[5]||C(ir,'display:none');j==5&&Object.assign(ir,{type:'range',value:0,min:0,max:100,step:1});
const ll=mk('div',pr[5]?j==5?'ðŸŒˆTeinte '+(lv||0):'ðŸ«² '+lv:'',C1+'#f44;'),rl=mk('div',pr[5]?j==5?'ðŸ’¡Luminosite '+(rv||50):'ðŸ«± '+rv:'',C1+'#4f4;');
pr[5]||C(rl,'display:none');sd.append(ll,il,rl,ir);
const hs=()=>(sd.style.display='none',w.style.background=j==5?`hsl(${s[i][0][j]||0},100%,${s[i][1][j]||50}%)`:'#000');
w.onclick=e=>{
e.stopPropagation();
sl.forEach(r=>r.forEach(el=>el.style.display='none'));
const r=gR(w);
sd.style.top=(r.bottom+5)+'px';
sd.style.display='block';
w.style.background=j==5?`hsl(${lv||0},100%,30%)`:cl.replace('50%','5%');
setTimeout(()=>d.addEventListener('click',hs,{once:!0}),10)
};
[il,ir].forEach((inp,k)=>inp.oninput=e=>{
s[i][k][j]=+e.target.value;
j==5?(W([ll,rl][k],['ðŸŒˆTeinte ','ðŸ’¡Luminosite '][k]+e.target.value),w.style.background=`hsl(${k?lv:e.target.value},100%,${k?e.target.value:rv||50}%)`):
(W([ll,rl][k],['ðŸ«² ','ðŸ«± '][k]+e.target.value),!pr[5]&&!k?(s[i][1][j]=+e.target.value,W(sl1,e.target.value)):pr[5]&&((()=>{const [nlv,nrv]=[s[i][0][j],s[i][1][j]];W(sl1,nlv);nlv==nrv?C(sr,'display:none'):(C(sr,'display:block'),W(sr,nrv),C(sr,F1+C1+G(i).replace('50%','75%')))})()));
const ng=H(i,75),nb=H(i,50);
a[0].style.borderImage=nb+' 1';a[0].style.background=ng;uc();mo&&J()
});
[il,ir,sd].forEach(el=>el.onclick=e=>e.stopPropagation());
[sl1,sr].forEach(el=>C(el,F1+C1+tc));
w.append(l3,sl1,sr,sd);pd.append(w)
});
a[2]=pd;a[0].append(pd);
const bt1=mk('div','',S2);
BT.forEach((em,k)=>{const b=mk('div',em,CU+F2+C1+'#29f;');b.onclick=[()=>(s.splice(i+1,0,cp(s[i])),At()),()=>(s.splice(i+1,0,rv()),At()),()=>(s.splice(i+1,0,sw(cp(s[i]))),At())][k];bt1.append(b)});
a[0].append(bt1);return a
},
uc=()=>E.forEach((el,i)=>{const [ng,nb]=[H(i,75),H(i,50)];el[0].style.borderImage=nb+' 1';el[0].style.background=ng;i>=s.length-1&&(el[0].style.borderColor=nb,el[0].style.borderImage='none')}),
At=()=>(E.length=0,sl.length=0,U[4].replaceChildren(),s.forEach((a,i)=>{const b=L(i);E[i]=b;U[4].append(b[0])}),z(),uc(),J()),
z=()=>W(U[5],`Configuration-${s.length}etapes-${s.reduce((b,c)=>b+c[0][0],0)}s`);
U=['body','h1','p','div','div','h2'].map(c);['','ðŸŒˆSpiraStrober','Generateur AudioStrobe G/D optimise','','Apercu',''].forEach((x,i)=>x&&W(U[i],x));U[0].style.paddingBottom='2dvw';[U[1],U[2],U[3],K(),U[4],U[5]].forEach(el=>U[0].append(el));e.append(U[0]);Array.from({length:4},()=>s.push(rv()));At()
</script>
